<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.4">
<meta name="author" content="Tilman Seifert (QAware GmbH)">
<title>QAvalidator</title>
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";

*, *:before, *:after {
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box
}

article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary {
    display: block
}

audio, canvas, video {
    display: inline-block
}

audio:not([controls]) {
    display: none;
    height: 0
}

[hidden], template {
    display: none
}

script {
    display: none !important
}

html {
    font-family: "Univers LT W02", Helvetica, Arial, sans-serif;
    -ms-text-size-adjust: 100%;
    -webkit-text-size-adjust: 100%
}

html, body {
    font-size: 100%
}

body {
    background: #fff;
    color: rgba(0, 0, 0, .8);
    padding: 0;
    margin: 0;
    font-family: "Univers LT W02", Helvetica, Arial, sans-serif;
    font-weight: 400;
    font-style: normal;
    line-height: 1;
    position: relative;
    cursor: auto;
    tab-size: 4;
    -webkit-font-smoothing: antialiased;
}

h1 {
    font-size: 275%;
}

h2 {
    font-size: 160%;
}

h3, #toctitle, .sidebarblock > .content > .title {
    font-size: 130%;
}

h4, h5 {
    font-size: 112%;
}

h6 {
    font-size: 100%;
}

a {
    background: transparent
}

a:focus {
    outline: thin dotted
}

a:active, a:hover {
    outline: 0
}

a:hover {
    cursor: pointer
}

abbr[title] {
    border-bottom: 1px dotted
}

b, strong {
    font-weight: bold
}

dfn {
    font-style: italic
}

hr {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
    height: 0
}

mark {
    background: #ff0;
    color: #000
}

code, kbd, pre, samp {
    font-family: monospace;
    font-size: 100%
}

pre {
    white-space: pre-wrap
}

q {
    quotes: "\201C" "\201D" "\2018" "\2019"
}

small {
    font-size: 60%;
    line-height: inherit
}

sub, sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline
}

sup {
    top: -.5em
}

sub {
    bottom: -.25em
}

img {
    border: 0
}

svg:not(:root) {
    overflow: hidden
}

figure {
    margin: 0
}

fieldset {
    border: 1px solid silver;
    margin: 0 2px;
    padding: .35em .625em .75em
}

legend {
    border: 0;
    padding: 0
}

button, input, select, textarea {
    font-family: inherit;
    font-size: 100%;
    margin: 0
}

button, input {
    line-height: normal
}

button, select {
    text-transform: none
}

button, html input[type="button"], input[type="reset"], input[type="submit"] {
    -webkit-appearance: button;
    cursor: pointer
}

button[disabled], html input[disabled] {
    cursor: default
}

input[type="checkbox"], input[type="radio"] {
    box-sizing: border-box;
    padding: 0
}

input[type="search"] {
    -webkit-appearance: textfield;
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box;
    box-sizing: content-box
}

input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none
}

button::-moz-focus-inner, input::-moz-focus-inner {
    border: 0;
    padding: 0
}

textarea {
    overflow: auto;
    vertical-align: top
}

img, object, embed {
    max-width: 100%;
    height: auto
}

img {
    -ms-interpolation-mode: bicubic
}

object, embed {
    height: 100%
}

.left {
    float: left !important
}

.right {
    float: right !important
}

.text-left {
    text-align: left !important
}

.text-right {
    text-align: right !important
}

.text-center {
    text-align: center !important
}

.text-justify {
    text-align: justify !important
}

.hide {
    display: none
}

img, object, svg {
    display: inline-block;
    vertical-align: middle
}

textarea {
    height: auto;
    min-height: 50px
}

select {
    width: 100%
}

.center {
    margin-left: auto;
    margin-right: auto
}

.spread {
    width: 100%
}

.subheader, .admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title {
    line-height: 1.45;
    color: #7a2518;
    font-weight: 400;
    margin-top: 0;
    margin-bottom: .25em
}

div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td {
    margin: 0;
    padding: 0;
    direction: ltr
}

a {
    color: #2156a5;
    text-decoration: underline;
    line-height: inherit
}

a:hover, a:focus {
    color: #1d4b8f
}

a img {
    border: none
}

p {
    font-family: inherit;
    font-weight: 400;
    font-size: 100%;
    line-height: 1.4;
    margin-bottom: 1.25em;
    text-rendering: optimizeLegibility;
    text-align: justify;
}

p aside {
    font-size: 80%;
    line-height: 1.35;
    font-style: italic
}

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 {
    font-family: "Univers LT W02", Helvetica, Arial, sans-serif;
    font-weight: 300;
    font-style: normal;
    color: #28537d;
    text-rendering: optimizeLegibility;
    margin-top: 1em;
    margin-bottom: .5em;
    line-height: 1.0125em
}

h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small {
    font-size: 60%;
    color: #e99b8f;
    line-height: 0
}

hr {
    border: solid #ddddd8;
    border-width: 1px 0 0;
    clear: both;
    margin: 1.25em 0 1.1875em;
    height: 0
}

em, i {
    font-style: italic;
    line-height: inherit
}

strong, b {
    font-weight: bold;
    line-height: inherit
}

code {
    font-family: "Droid Sans Mono", "DejaVu Sans Mono", monospace;
    font-weight: 400;
    color: rgba(0, 0, 0, .9)
}

ul, ol, dl {
    line-height: 1.6;
    margin-bottom: 1.25em;
    list-style-position: outside;
    font-family: inherit
}

ul, ol, ul.no-bullet, ol.no-bullet {
    margin-left: 1.5em
}

ul li ul, ul li ol {
    margin-left: 1.25em;
    margin-bottom: 0;
}

ul.square li ul, ul.circle li ul, ul.disc li ul {
    list-style: inherit
}

ul.square {
    list-style-type: square
}

ul.circle {
    list-style-type: circle
}

ul.disc {
    list-style-type: disc
}

ul.no-bullet {
    list-style: none
}

ol li ul, ol li ol {
    margin-left: 1.25em;
    margin-bottom: 0
}

dl dt {
    margin-bottom: .3125em;
    font-weight: bold
}

dl dd {
    margin-bottom: 1.25em
}

abbr, acronym {
    text-transform: uppercase;
    font-size: 90%;
    color: rgba(0, 0, 0, .8);
    border-bottom: 1px dotted #ddd;
    cursor: help
}

abbr {
    text-transform: none
}

blockquote {
    margin: 0 0 1.25em;
    padding: .5625em 1.25em 0 1.1875em;
    border-left: 1px solid #ddd
}

blockquote cite {
    display: block;
    font-size: 90%;
    color: rgba(0, 0, 0, .6)
}

blockquote cite:before {
    content: "\2014 \0020"
}

blockquote cite a, blockquote cite a:visited {
    color: rgba(0, 0, 0, .6)
}

blockquote, blockquote p {
    line-height: 1.6;
    color: rgba(0, 0, 0, .85)
}

table {
    background: #fff;
    margin-bottom: 1.25em;
    border: solid 1px #dedede;
    border-collapse: collapse;
    border-spacing: 0;
}

table thead, table tfoot {
    background: #f7f8f7;
    font-weight: bold
}

table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td {
    padding: .5em .625em .625em;
    font-size: inherit;
    color: rgba(0, 0, 0, .8);
    text-align: left
}

table tr th, table tr td {
    padding: .5625em .625em;
    font-size: inherit;
    color: rgba(0, 0, 0, .8)
}

table tr.even, table tr.alt, table tr:nth-of-type(even) {
    background: #f8f8f7
}

table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td {
    display: table-cell;
    line-height: 1.6
}

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 {
    line-height: 1.2;
    word-spacing: -.05em
}

h1 strong, h2 strong, h3 strong, #toctitle strong, .sidebarblock > .content > .title strong, h4 strong, h5 strong, h6 strong {
    font-weight: 400
}

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after {
    content: " ";
    display: table
}

.clearfix:after, .float-group:after {
    clear: both
}

*:not(pre) > code {
    font-size: 100%;
    font-style: normal !important;
    letter-spacing: 0;
    padding: .1em .5ex;
    word-spacing: -.15em;
    background-color: #f7f7f8;
    -webkit-border-radius: 4px;
    border-radius: 4px;
    line-height: 1.45;
    text-rendering: optimizeSpeed
}

pre, pre > code {
    line-height: 1.45;
    color: rgba(0, 0, 0, .9);
    font-family: "Droid Sans Mono", "DejaVu Sans Mono", monospace;
    font-weight: 400;
    text-rendering: optimizeSpeed
}

.keyseq {
    color: rgba(51, 51, 51, .8)
}

kbd {
    font-family: "Droid Sans Mono", "DejaVu Sans Mono", monospace;
    display: inline-block;
    color: rgba(0, 0, 0, .8);
    font-size: 65%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border: 1px solid #ccc;
    -webkit-border-radius: 3px;
    border-radius: 3px;
    -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, .2), 0 0 0 .1em white inset;
    box-shadow: 0 1px 0 rgba(0, 0, 0, .2), 0 0 0 .1em #fff inset;
    margin: 0 .15em;
    padding: .2em .5em;
    vertical-align: middle;
    position: relative;
    top: -.1em;
    white-space: nowrap
}

.keyseq kbd:first-child {
    margin-left: 0
}

.keyseq kbd:last-child {
    margin-right: 0
}

.menuseq, .menu {
    color: rgba(0, 0, 0, .8)
}

b.button:before, b.button:after {
    position: relative;
    top: -1px;
    font-weight: 400
}

b.button:before {
    content: "[";
    padding: 0 3px 0 2px
}

b.button:after {
    content: "]";
    padding: 0 2px 0 3px
}

p a > code:hover {
    color: rgba(0, 0, 0, .9)
}

#header, #content, #footnotes, #footer {
    width: 100%;
    margin-left: auto;
    margin-right: auto;
    margin-top: 0;
    margin-bottom: 0;
    max-width: 62.5em;
    *zoom: 1;
    position: relative;
    padding-left: .9375em;
    padding-right: .9375em
}

#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after {
    content: " ";
    display: table
}

#header:after, #content:after, #footnotes:after, #footer:after {
    clear: both
}

#content {
    margin-top: 1.25em
}

#content:before {
    content: none
}

#header > h1:first-child {
    color: rgba(0, 0, 0, .85);
    margin-top: 2.25rem;
    margin-bottom: 0
}

#header > h1:first-child + #toc {
    margin-top: 8px;
    border-top: 1px solid #ddddd8
}

#header > h1:only-child, body.toc2 #header > h1:nth-last-child(2) {
    border-bottom: 1px solid #ddddd8;
    padding-bottom: 8px
}

#header .details {
    border-bottom: 1px solid #ddddd8;
    line-height: 1.45;
    padding-top: .25em;
    padding-bottom: .25em;
    padding-left: .25em;
    color: rgba(0, 0, 0, .6);
    display: -ms-flexbox;
    display: -webkit-flex;
    display: flex;
    -ms-flex-flow: row wrap;
    -webkit-flex-flow: row wrap;
    flex-flow: row wrap
}

#header .details span:first-child {
    margin-left: -.125em
}

#header .details span.email a {
    color: rgba(0, 0, 0, .85)
}

#header .details br {
    display: none
}

#header .details br + span:before {
    content: "\00a0\2013\00a0"
}

#header .details br + span.author:before {
    content: "\00a0\22c5\00a0";
    color: rgba(0, 0, 0, .85)
}

#header .details br + span#revremark:before {
    content: "\00a0|\00a0"
}

#header #revnumber {
    text-transform: capitalize
}

#header #revnumber:after {
    content: "\00a0"
}

#content > h1:first-child:not([class]) {
    color: rgba(0, 0, 0, .85);
    border-bottom: 1px solid #ddddd8;
    padding-bottom: 8px;
    margin-top: 0;
    padding-top: 1rem;
    margin-bottom: 1.25rem
}

#toc {
    border-bottom: 1px solid #efefed;
    padding-bottom: .5em
}

#toc > ul {
    margin-left: .125em
}

#toc ul.sectlevel0 > li > a {
    font-style: italic
}

#toc ul.sectlevel0 ul.sectlevel1 {
    margin: .5em 0
}

#toc ul {
    font-family: "Univers LT W02", Helvetica, Arial, sans-serif;
    list-style-type: none
}

#toc li {
    line-height: 1.3334;
    margin-top: .3334em
}

#toc a {
    text-decoration: none
}

#toc a:active {
    text-decoration: underline
}

#toctitle {
    color: #28537d;
    font-size: 120%;
}

@media only screen and (min-width: 768px) {
    #toctitle {
        font-size: 130%;
    }

    body.toc2 {
        padding-left: 15em;
        padding-right: 0
    }

    #toc.toc2 {
        margin-top: 0 !important;
        background-color: #f8f8f7;
        position: fixed;
        width: 15em;
        left: 0;
        top: 0;
        border-right: 1px solid #efefed;
        border-top-width: 0 !important;
        border-bottom-width: 0 !important;
        z-index: 1000;
        padding: 1.25em 1em;
        height: 100%;
        overflow: auto
    }

    #toc.toc2 #toctitle {
        margin-top: 0;
        margin-bottom: .8rem;
        font-size: 120%;
    }

    #toc.toc2 > ul {
        font-size: 90%;
        margin-bottom: 0
    }

    #toc.toc2 ul ul {
        margin-left: 0;
        padding-left: 1em
    }

    #toc.toc2 ul.sectlevel0 ul.sectlevel1 {
        padding-left: 0;
        margin-top: .5em;
        margin-bottom: .5em
    }

    body.toc2.toc-right {
        padding-left: 0;
        padding-right: 15em
    }

    body.toc2.toc-right #toc.toc2 {
        border-right-width: 0;
        border-left: 1px solid #efefed;
        left: auto;
        right: 0
    }
}

#content #toc {
    border-style: solid;
    border-width: 1px;
    border-color: #e0e0dc;
    margin-bottom: 1.25em;
    padding: 1.25em;
    background: #f8f8f7;
    -webkit-border-radius: 4px;
    border-radius: 4px
}

#content #toc > :first-child {
    margin-top: 0
}

#content #toc > :last-child {
    margin-bottom: 0
}

#footer {
    max-width: 100%;
    background-color: rgba(0, 0, 0, .8);
    padding: 1.25em
}

#footer-text {
    color: rgba(255, 255, 255, .8);
    line-height: 1.44
}

.sect1 {
    padding-bottom: 1.25em
}

.sect1 + .sect1 {
    border-top: 1px solid #efefed
}

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor {
    position: absolute;
    z-index: 1001;
    width: 1.5ex;
    margin-left: -1.5ex;
    display: block;
    text-decoration: none !important;
    visibility: hidden;
    text-align: center;
    font-weight: 400
}

#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before {
    content: "\00A7";
    font-size: 85%;
    display: block;
    padding-top: .1em
}

#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover {
    visibility: visible
}

#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link {
    color: #ba3925;
    text-decoration: none
}

#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover {
    color: #a53221
}

.audioblock, .imageblock, .literalblock, .listingblock, .stemblock, .videoblock {
    margin-bottom: 1.25em
}

.admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title {
    text-rendering: optimizeLegibility;
    text-align: left;
    font-family: "Univers LT W02", Helvetica, Arial, sans-serif;
    font-size: 100%;
    font-style: italic
}

table.tableblock > caption.title {
    white-space: nowrap;
    overflow: visible;
    max-width: 0
}

.paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p {
    color: rgba(0, 0, 0, .85)
}

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p {
    font-size: inherit
}

.admonitionblock > table {
    border-collapse: separate;
    border: 0;
    background: none;
    width: 100%
}

.admonitionblock > table td.icon {
    text-align: center;
    width: 80px
}

.admonitionblock > table td.icon img {
    max-width: none
}

.admonitionblock > table td.icon .title {
    font-weight: bold;
    font-family: "Univers LT W02", Helvetica, Arial, sans-serif;
    text-transform: uppercase
}

.admonitionblock > table td.content {
    padding-left: 1.125em;
    padding-right: 1.25em;
    border-left: 1px solid #ddddd8;
    color: rgba(0, 0, 0, .6)
}

.admonitionblock > table td.content > :last-child > :last-child {
    margin-bottom: 0
}

.exampleblock > .content {
    border-style: solid;
    border-width: 1px;
    border-color: #e6e6e6;
    margin-bottom: 1.25em;
    padding: 1.25em;
    background: #fff;
    -webkit-border-radius: 4px;
    border-radius: 4px
}

.exampleblock > .content > :first-child {
    margin-top: 0
}

.exampleblock > .content > :last-child {
    margin-bottom: 0
}

.sidebarblock {
    border-style: solid;
    border-width: 1px;
    border-color: #e0e0dc;
    margin-bottom: 1.25em;
    padding: 1.25em;
    background: #f8f8f7;
    -webkit-border-radius: 4px;
    border-radius: 4px
}

.sidebarblock > :first-child {
    margin-top: 0
}

.sidebarblock > :last-child {
    margin-bottom: 0
}

.sidebarblock > .content > .title {
    color: #7a2518;
    margin-top: 0;
    text-align: center
}

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child {
    margin-bottom: 0
}

.literalblock pre, .listingblock pre:not(.highlight), .listingblock pre[class="highlight"], .listingblock pre[class^="highlight "], .listingblock pre.CodeRay, .listingblock pre.prettyprint {
    background: #f7f7f8
}

.sidebarblock .literalblock pre, .sidebarblock .listingblock pre:not(.highlight), .sidebarblock .listingblock pre[class="highlight"], .sidebarblock .listingblock pre[class^="highlight "], .sidebarblock .listingblock pre.CodeRay, .sidebarblock .listingblock pre.prettyprint {
    background: #f2f1f1
}

.literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] {
    -webkit-border-radius: 4px;
    border-radius: 4px;
    word-wrap: break-word;
    padding: 1em;
    font-size: 80%;
}

.literalblock pre.nowrap, .literalblock pre[class].nowrap, .listingblock pre.nowrap, .listingblock pre[class].nowrap {
    overflow-x: auto;
    white-space: pre;
    word-wrap: normal
}

.literalblock.output pre {
    color: #f7f7f8;
    background-color: rgba(0, 0, 0, .9)
}

.listingblock pre.highlightjs {
    padding: 0
}

.listingblock pre.highlightjs > code {
    padding: 1em;
    -webkit-border-radius: 4px;
    border-radius: 4px
}

.listingblock pre.prettyprint {
    border-width: 0
}

.listingblock > .content {
    position: relative
}

.listingblock code[data-lang]:before {
    display: none;
    content: attr(data-lang);
    position: absolute;
    font-size: 75%;
    top: .425rem;
    right: .5rem;
    line-height: 1;
    text-transform: uppercase;
    color: #999
}

.listingblock:hover code[data-lang]:before {
    display: block
}

.listingblock.terminal pre .command:before {
    content: attr(data-prompt);
    padding-right: .5em;
    color: #999
}

.listingblock.terminal pre .command:not([data-prompt]):before {
    content: "$"
}

table.pyhltable {
    border-collapse: separate;
    border: 0;
    margin-bottom: 0;
    background: none
}

table.pyhltable td {
    vertical-align: top;
    padding-top: 0;
    padding-bottom: 0;
    line-height: 1.45
}

table.pyhltable td.code {
    padding-left: .75em;
    padding-right: 0
}

pre.pygments .lineno, table.pyhltable td:not(.code) {
    color: #999;
    padding-left: 0;
    padding-right: .5em;
    border-right: 1px solid #ddddd8
}

pre.pygments .lineno {
    display: inline-block;
    margin-right: .25em
}

table.pyhltable .linenodiv {
    background: none !important;
    padding-right: 0 !important
}

.quoteblock {
    margin: 0 1em 1.25em 1.5em;
    display: table
}

.quoteblock > .title {
    margin-left: -1.5em;
    margin-bottom: .75em
}

.quoteblock blockquote, .quoteblock blockquote p {
    color: rgba(0, 0, 0, .85);
    font-size: 115%;
    line-height: 1.75;
    word-spacing: .1em;
    letter-spacing: 0;
    font-style: italic;
    text-align: justify
}

.quoteblock blockquote {
    margin: 0;
    padding: 0;
    border: 0
}

.quoteblock blockquote:before {
    content: "\201c";
    float: left;
    font-size: 275%;
    font-weight: bold;
    line-height: .6em;
    margin-left: -.6em;
    color: #7a2518;
    text-shadow: 0 1px 2px rgba(0, 0, 0, .1)
}

.quoteblock blockquote > .paragraph:last-child p {
    margin-bottom: 0
}

.quoteblock .attribution {
    margin-top: .5em;
    margin-right: .5ex;
    text-align: right
}

.quoteblock .quoteblock {
    margin-left: 0;
    margin-right: 0;
    padding: .5em 0;
    border-left: 3px solid rgba(0, 0, 0, .6)
}

.quoteblock .quoteblock blockquote {
    padding: 0 0 0 .75em
}

.quoteblock .quoteblock blockquote:before {
    display: none
}

.verseblock {
    margin: 0 1em 1.25em 1em
}

.verseblock pre {
    font-family: "Univers LT W02", Helvetica, Arial, sans-serif;
    font-size: 100%;
    color: rgba(0, 0, 0, .85);
    font-weight: 300;
    text-rendering: optimizeLegibility
}

.verseblock pre strong {
    font-weight: 400
}

.verseblock .attribution {
    margin-top: 1.25rem;
    margin-left: .5ex
}

.quoteblock .attribution, .verseblock .attribution {
    font-size: 100%;
    line-height: 1.45;
    font-style: italic
}

.quoteblock .attribution br, .verseblock .attribution br {
    display: none
}

.quoteblock .attribution cite, .verseblock .attribution cite {
    display: block;
    letter-spacing: -.025em;
    color: rgba(0, 0, 0, .6)
}

.quoteblock.abstract {
    margin: 0 0 1.25em 0;
    display: block
}

.quoteblock.abstract blockquote, .quoteblock.abstract blockquote p {
    text-align: left;
    word-spacing: 0
}

.quoteblock.abstract blockquote:before, .quoteblock.abstract blockquote p:first-of-type:before {
    display: none
}

table.tableblock {
    max-width: 100%;
    border-collapse: separate
}

table.tableblock td > .paragraph:last-child p > p:last-child, table.tableblock th > p:last-child, table.tableblock td > p:last-child {
    margin-bottom: 0
}

table.tableblock, th.tableblock, td.tableblock {
    border: 0 solid #dedede
}

table.grid-all th.tableblock, table.grid-all td.tableblock {
    border-width: 0 1px 1px 0
}

table.grid-all tfoot > tr > th.tableblock, table.grid-all tfoot > tr > td.tableblock {
    border-width: 1px 1px 0 0
}

table.grid-cols th.tableblock, table.grid-cols td.tableblock {
    border-width: 0 1px 0 0
}

table.grid-all * > tr > .tableblock:last-child, table.grid-cols * > tr > .tableblock:last-child {
    border-right-width: 0
}

table.grid-rows th.tableblock, table.grid-rows td.tableblock {
    border-width: 0 0 1px 0
}

table.grid-all tbody > tr:last-child > th.tableblock, table.grid-all tbody > tr:last-child > td.tableblock, table.grid-all thead:last-child > tr > th.tableblock, table.grid-rows tbody > tr:last-child > th.tableblock, table.grid-rows tbody > tr:last-child > td.tableblock, table.grid-rows thead:last-child > tr > th.tableblock {
    border-bottom-width: 0
}

table.grid-rows tfoot > tr > th.tableblock, table.grid-rows tfoot > tr > td.tableblock {
    border-width: 1px 0 0 0
}

table.frame-all {
    border-width: 1px
}

table.frame-sides {
    border-width: 0 1px
}

table.frame-topbot {
    border-width: 1px 0
}

th.halign-left, td.halign-left {
    text-align: left
}

th.halign-right, td.halign-right {
    text-align: right
}

th.halign-center, td.halign-center {
    text-align: center
}

th.valign-top, td.valign-top {
    vertical-align: top
}

th.valign-bottom, td.valign-bottom {
    vertical-align: bottom
}

th.valign-middle, td.valign-middle {
    vertical-align: middle
}

table thead th, table tfoot th {
    font-weight: bold
}

tbody tr th {
    display: table-cell;
    line-height: 1.6;
    background: #f7f8f7
}

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p {
    color: rgba(0, 0, 0, .8);
    font-weight: bold
}

p.tableblock > code:only-child {
    background: none;
    padding: 0
}

p.tableblock {
    font-size: 100%;
}

td > div.verse {
    white-space: pre
}

ol {
    margin-left: 1.75em
}

ul li ol {
    margin-left: 1.5em
}

dl dd {
    margin-left: 1.125em
}

dl dd:last-child, dl dd:last-child > :last-child {
    margin-bottom: 0
}

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist {
    margin-bottom: .625em
}

ul.unstyled, ol.unnumbered, ul.checklist, ul.none {
    list-style-type: none
}

ul.unstyled, ol.unnumbered, ul.checklist {
    margin-left: .625em
}

ul.checklist li > p:first-child > .fa-square-o:first-child, ul.checklist li > p:first-child > .fa-check-square-o:first-child {
    width: 1em;
    font-size: 80%;
}

ul.checklist li > p:first-child > input[type="checkbox"]:first-child {
    width: 1em;
    position: relative;
    top: 1px
}

ul.inline {
    margin: 0 auto .625em auto;
    margin-left: -1.375em;
    margin-right: 0;
    padding: 0;
    list-style: none;
    overflow: hidden
}

ul.inline > li {
    list-style: none;
    float: left;
    margin-left: 1.375em;
    display: block
}

ul.inline > li > * {
    display: block
}

.unstyled dl dt {
    font-weight: 400;
    font-style: normal
}

ol.arabic {
    list-style-type: decimal
}

ol.decimal {
    list-style-type: decimal-leading-zero
}

ol.loweralpha {
    list-style-type: lower-alpha
}

ol.upperalpha {
    list-style-type: upper-alpha
}

ol.lowerroman {
    list-style-type: lower-roman
}

ol.upperroman {
    list-style-type: upper-roman
}

ol.lowergreek {
    list-style-type: lower-greek
}

.hdlist > table, .colist > table {
    border: 0;
    background: none
}

.hdlist > table > tbody > tr, .colist > table > tbody > tr {
    background: none
}

td.hdlist1, td.hdlist2 {
    vertical-align: top;
    padding: 0 .625em
}

td.hdlist1 {
    font-weight: bold;
    padding-bottom: 1.25em
}

.literalblock + .colist, .listingblock + .colist {
    margin-top: -.5em
}

.colist > table tr > td:first-of-type {
    padding: 0 .75em;
    line-height: 1
}

.colist > table tr > td:last-of-type {
    padding: .25em 0
}

.thumb, .th {
    line-height: 0;
    display: inline-block;
    border: solid 4px #fff;
    -webkit-box-shadow: 0 0 0 1px #ddd;
    box-shadow: 0 0 0 1px #ddd
}

.imageblock.left, .imageblock[style*="float: left"] {
    margin: .25em .625em 1.25em 0
}

.imageblock.right, .imageblock[style*="float: right"] {
    margin: .25em 0 1.25em .625em
}

.imageblock > .title {
    margin-bottom: 0
}

.imageblock.thumb, .imageblock.th {
    border-width: 6px
}

.imageblock.thumb > .title, .imageblock.th > .title {
    padding: 0 .125em
}

.image.left, .image.right {
    margin-top: .25em;
    margin-bottom: .25em;
    display: inline-block;
    line-height: 0
}

.image.left {
    margin-right: .625em
}

.image.right {
    margin-left: .625em
}

a.image {
    text-decoration: none;
    display: inline-block
}

a.image object {
    pointer-events: none
}

sup.footnote, sup.footnoteref {
    font-size: 80%;
    position: static;
    vertical-align: super
}

sup.footnote a, sup.footnoteref a {
    text-decoration: none
}

sup.footnote a:active, sup.footnoteref a:active {
    text-decoration: underline
}

#footnotes {
    padding-top: .75em;
    padding-bottom: .75em;
    margin-bottom: .625em
}

#footnotes hr {
    width: 20%;
    min-width: 6.25em;
    margin: -.25em 0 .75em 0;
    border-width: 1px 0 0 0
}

#footnotes .footnote {
    padding: 0 .375em 0 .225em;
    line-height: 1.3334;
    font-size: 80%;
    margin-left: 1.2em;
    text-indent: -1.05em;
    margin-bottom: .2em
}

#footnotes .footnote a:first-of-type {
    font-weight: bold;
    text-decoration: none
}

#footnotes .footnote:last-of-type {
    margin-bottom: 0
}

#content #footnotes {
    margin-top: -.625em;
    margin-bottom: 0;
    padding: .75em 0
}

.gist .file-data > table {
    border: 0;
    background: #fff;
    width: 100%;
    margin-bottom: 0
}

.gist .file-data > table td.line-data {
    width: 99%
}

div.unbreakable {
    page-break-inside: avoid
}

.big {
    font-size: larger
}

.small {
    font-size: smaller
}

.underline {
    text-decoration: underline
}

.overline {
    text-decoration: overline
}

.line-through {
    text-decoration: line-through
}

.aqua {
    color: #00bfbf
}

.aqua-background {
    background-color: #00fafa
}

.black {
    color: #000
}

.black-background {
    background-color: #000
}

.blue {
    color: #0000bf
}

.blue-background {
    background-color: #0000fa
}

.fuchsia {
    color: #bf00bf
}

.fuchsia-background {
    background-color: #fa00fa
}

.gray {
    color: #606060
}

.gray-background {
    background-color: #7d7d7d
}

.green {
    color: #006000
}

.green-background {
    background-color: #007d00
}

.lime {
    color: #00bf00
}

.lime-background {
    background-color: #00fa00
}

.maroon {
    color: #600000
}

.maroon-background {
    background-color: #7d0000
}

.navy {
    color: #000060
}

.navy-background {
    background-color: #00007d
}

.olive {
    color: #606000
}

.olive-background {
    background-color: #7d7d00
}

.purple {
    color: #600060
}

.purple-background {
    background-color: #7d007d
}

.red {
    color: #bf0000
}

.red-background {
    background-color: #fa0000
}

.silver {
    color: #909090
}

.silver-background {
    background-color: #bcbcbc
}

.teal {
    color: #006060
}

.teal-background {
    background-color: #007d7d
}

.white {
    color: #bfbfbf
}

.white-background {
    background-color: #fafafa
}

.yellow {
    color: #bfbf00
}

.yellow-background {
    background-color: #fafa00
}

span.icon > .fa {
    cursor: default
}

.admonitionblock td.icon [class^="fa icon-"] {
    font-size: 250%;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, .5);
    cursor: default
}

.admonitionblock td.icon .icon-note:before {
    content: "\f05a";
    color: #19407c
}

.admonitionblock td.icon .icon-tip:before {
    content: "\f0eb";
    text-shadow: 1px 1px 2px rgba(155, 155, 0, .8);
    color: #111
}

.admonitionblock td.icon .icon-warning:before {
    content: "\f071";
    color: #bf6900
}

.admonitionblock td.icon .icon-caution:before {
    content: "\f06d";
    color: #bf3400
}

.admonitionblock td.icon .icon-important:before {
    content: "\f06a";
    color: #bf0000
}

.conum[data-value] {
    display: inline-block;
    color: #fff !important;
    background-color: rgba(0, 0, 0, .8);
    -webkit-border-radius: 100px;
    border-radius: 100px;
    text-align: center;
    font-size: 75%;
    width: 1.67em;
    height: 1.67em;
    line-height: 1.67em;
    font-family: "Univers LT W02", Helvetica, Arial, sans-serif;
    font-style: normal;
    font-weight: bold
}

.conum[data-value] * {
    color: #fff !important
}

.conum[data-value] + b {
    display: none
}

.conum[data-value]:after {
    content: attr(data-value)
}

pre .conum[data-value] {
    position: relative;
    top: -.125em
}

b.conum * {
    color: inherit !important
}

.conum:not([data-value]):empty {
    display: none
}

dt, th.tableblock, td.content, div.footnote {
    text-rendering: optimizeLegibility
}

h1, h2, p, td.content, span.alt {
    letter-spacing: -.01em;
}

p strong, td.content strong, div.footnote strong {
    letter-spacing: -.005em
}

.sidebarblock p, .sidebarblock dt, .sidebarblock td.content, p.tableblock {
    font-size: 100%;
}

.exampleblock > .content {
    background-color: #fffef7;
    border-color: #e0e0dc;
    -webkit-box-shadow: 0 1px 4px #e0e0dc;
    box-shadow: 0 1px 4px #e0e0dc
}

.print-only {
    display: none !important
}

@media print {
    @page {
        margin: 1.25cm 2.25cm
    }

    * {
        -webkit-box-shadow: none !important;
        box-shadow: none !important;
        text-shadow: none !important
    }

    a {
        color: inherit !important;
        text-decoration: underline !important
    }

    a.bare, a[href^="#"], a[href^="mailto:"] {
        text-decoration: none !important
    }

    a[href^="http:"]:not(.bare):after, a[href^="https:"]:not(.bare):after {
        content: "(" attr(href) ")";
        display: inline-block;
        font-size: inherit;
        padding-left: .25em
    }

    abbr[title]:after {
        content: " (" attr(title) ")"
    }

    pre, blockquote, tr, img, object, svg {
        page-break-inside: avoid
    }

    thead {
        display: table-header-group
    }

    svg {
        max-width: 100%
    }

    body {
        font-size: 10pt;
    }

    p, blockquote, dt, td.content {
        font-size: 100%;
        orphans: 3;
        widows: 3
    }

    h2, h3, #toctitle, .sidebarblock > .content > .title {
        page-break-after: avoid
    }

    #toc, .sidebarblock, .exampleblock > .content {
        background: none !important
    }

    #toc {
        border-bottom: 1px solid #ddddd8 !important;
        padding-bottom: 0 !important
    }

    .sect1 {
        padding-bottom: 0 !important
    }

    .sect1 + .sect1 {
        border: 0 !important
    }

    #header > h1:first-child {
        margin-top: 1.25rem
    }

    body.book #header {
        text-align: center
    }

    body.book #header > h1:first-child {
        border: 0 !important;
        margin: 2.5em 0 1em 0
    }

    body.book #header .details {
        border: 0 !important;
        display: block;
        padding: 0 !important
    }

    body.book #header .details span:first-child {
        margin-left: 0 !important
    }

    body.book #header .details br {
        display: block
    }

    body.book #header .details br + span:before {
        content: none !important
    }

    body.book #toc {
        border: 0 !important;
        text-align: left !important;
        padding: 0 !important;
        margin: 0 !important
    }

    body.book #toc, body.book #preamble, body.book h1.sect0, body.book .sect1 > h2 {
        page-break-before: always
    }

    .listingblock code[data-lang]:before {
        display: block
    }

    #footer {
        background: none !important;
        padding: 0 .9375em
    }

    #footer-text {
        color: rgba(0, 0, 0, .6) !important;
        font-size: 90%;
    }

    .hide-on-print {
        display: none !important
    }

    .print-only {
        display: block !important
    }

    .hide-for-print {
        display: none !important
    }

    .show-for-print {
        display: inherit !important
    }
}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>QAvalidator</h1>
<div class="details">
<span id="author" class="author">Tilman Seifert (QAware GmbH)</span><br>
<span id="revnumber">version 1.2.9,</span>
<span id="revdate">18.01.2019</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_summary">Summary</a>
<ul class="sectlevel2">
<li><a href="#_qavalidator_analysis">QAvalidator Analysis</a></li>
<li><a href="#_why_should_i_use_it">Why should I use it?</a></li>
</ul>
</li>
<li><a href="#_getting_started">1. Getting Started</a>
<ul class="sectlevel2">
<li><a href="#_latest_version">1.1. Latest version</a></li>
<li><a href="#usage-maven">1.2. Maven Usage</a></li>
<li><a href="#getting-started-analysis">1.3. Define Your Own Analysis</a></li>
<li><a href="#_maven_configuration">1.4. Maven Configuration</a></li>
<li><a href="#usage-gradle">1.5. Gradle Usage</a></li>
<li><a href="#usage-cli">1.6. Command Line Usage</a></li>
<li><a href="#usage-hierarchical-projects">1.7. Using with Hierarchical Projects</a></li>
</ul>
</li>
<li><a href="#qav-architecture-dsl">2. Architecture Definition and Rules</a>
<ul class="sectlevel2">
<li><a href="#qav-architecture-dsl-intro">2.1. Definitions</a></li>
<li><a href="#qav-architecture-dsl-example">2.2. Architecture DSL Example</a></li>
<li><a href="#qav-architecture-dsl-reference">2.3. Architecture Model DSL Reference</a></li>
<li><a href="#_rules">2.4. Rules</a></li>
</ul>
</li>
<li><a href="#qav-analysis-dsl">3. Analysis DSL</a>
<ul class="sectlevel2">
<li><a href="#_example">3.1. Example</a></li>
<li><a href="#_overview_and_dsl_plugins">3.2. Overview and DSL Plugins</a></li>
<li><a href="#qav-analysis-dsl-input-scope">3.3. Input Scope</a></li>
<li><a href="#_creating_and_working_with_architecture_views_on_a_graph">3.4. Creating and Working with Architecture Views on a Graph</a></li>
<li><a href="#_manipulation">3.5. Manipulation</a></li>
<li><a href="#qav-analysis-dsl-validation">3.6. Validation</a></li>
<li><a href="#qav-analysis-dsl-export">3.7. Export and Visualization</a></li>
<li><a href="#_sonarqube_and_monitoring_the_quality_contract">3.8. SonarQube and Monitoring the Quality Contract</a></li>
<li><a href="#_typical_analysis_steps">3.9. Typical Analysis Steps</a></li>
<li><a href="#qav-analysis-dsl-fail-build">3.10. Failing the Build</a></li>
</ul>
</li>
<li><a href="#qav-ui">4. UI</a>
<ul class="sectlevel2">
<li><a href="#_start_the_web_ui">4.1. Start the Web UI</a></li>
<li><a href="#_search">4.2. Search</a></li>
<li><a href="#_the_node_detail_view">4.3. The node detail view</a></li>
<li><a href="#_the_dependency_detail_view">4.4. The dependency detail view</a></li>
</ul>
</li>
<li><a href="#_developer_documentation">5. Developer Documentation</a>
<ul class="sectlevel2">
<li><a href="#qav-dev-core-ideas">5.1. QAvalidator Core Ideas</a></li>
<li><a href="#qav-dev-project-structure">5.2. Project Structure</a></li>
</ul>
</li>
<li><a href="#release-notes">6. Release Notes</a>
<ul class="sectlevel2">
<li><a href="#_release_1_2_9_16_01_2019">6.1. Release 1.2.9&#8201;&#8212;&#8201;(16.01.2019)</a></li>
<li><a href="#_release_1_2_7_31_01_2018">6.2. Release 1.2.7&#8201;&#8212;&#8201;31.01.2018</a></li>
<li><a href="#_release_1_2_6_04_11_2017">6.3. Release 1.2.6&#8201;&#8212;&#8201;04.11.2017</a></li>
<li><a href="#_release_1_2_5_21_09_2017">6.4. Release 1.2.5&#8201;&#8212;&#8201;21.09.2017</a></li>
<li><a href="#_release_1_2_4_11_09_2017">6.5. Release 1.2.4&#8201;&#8212;&#8201;11.09.2017</a></li>
<li><a href="#_release_1_2_3_25_07_2017">6.6. Release 1.2.3&#8201;&#8212;&#8201;25.07.2017</a></li>
<li><a href="#_release_1_2_2_09_03_2017">6.7. Release 1.2.2&#8201;&#8212;&#8201;09.03.2017</a></li>
<li><a href="#_release_1_2_1_06_03_2017">6.8. Release 1.2.1&#8201;&#8212;&#8201;06.03.2017</a></li>
<li><a href="#_release_1_2_0_02_03_2017">6.9. Release 1.2.0&#8201;&#8212;&#8201;02.03.2017</a></li>
<li><a href="#_release_1_1_1_06_02_2017">6.10. Release 1.1.1&#8201;&#8212;&#8201;06.02.2017</a></li>
<li><a href="#_release_1_1_0_04_02_2017">6.11. Release 1.1.0&#8201;&#8212;&#8201;04.02.2017</a></li>
<li><a href="#_release_1_0_0_21_12_2016">6.12. Release 1.0.0&#8201;&#8212;&#8201;21.12.2016</a></li>
<li><a href="#_release_0_9_1_12_12_2016">6.13. Release 0.9.1&#8201;&#8212;&#8201;12.12.2016</a></li>
<li><a href="#_release_0_9_12_12_2016">6.14. Release 0.9&#8201;&#8212;&#8201;12.12.2016</a></li>
</ul>
</li>
<li><a href="#roadmap">7. QAvalidator Backlog and Roadmap</a>
<ul class="sectlevel2">
<li><a href="#_features">7.1. Features</a></li>
<li><a href="#_code">7.2. Code</a></li>
<li><a href="#_storage">7.3. Storage</a></li>
</ul>
</li>
<li><a href="#related-work">8. Other Tools</a></li>
<li><a href="#bibliography">Bibliography and Links</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_summary"><a class="anchor" href="#_summary"></a>Summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The intention of QAvalidator is:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Document the intended architecture.</p>
</li>
<li>
<p>Validate that the intended architecture is always followed.
Issue warnings or errors if it isn&#8217;t.</p>
</li>
<li>
<p>Visualize the architecture&#8201;&#8212;&#8201;both the intended architecture and the actual dependencies.</p>
</li>
<li>
<p>Allow to explore the actual relations on architecture level and on code level in an interactive way.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The validation checks are easily possible for each developer on the developer machine, and they can be done in
the CI builds to give immediate feedback.</p>
</div>
<div class="paragraph">
<p>The term <em>"architecture"</em> is used in a very code-centered way. QAvalidator is about dependencies on code level.</p>
</div>
<div class="sect2">
<h3 id="_qavalidator_analysis"><a class="anchor" href="#_qavalidator_analysis"></a>QAvalidator Analysis</h3>
<div class="paragraph">
<p>QAvalidator uses multiple information sources:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Java code relationships, taken in a static way from the <code>.class</code> files</p>
</li>
<li>
<p>Maven dependencies as defined in the <code>pom.xml</code> files</p>
</li>
<li>
<p>Manually defined architectures</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>QAvalidator defines its own DSLs for both the architecture model description and the analysis description.
Chapters <a href="#qav-architecture-dsl">Architecture Definition and Rules</a> and <a href="#qav-analysis-dsl">Analysis DSL</a> explain the details.</p>
</div>
<div class="paragraph">
<p>There is also a sonar plugin available.</p>
</div>
</div>
<div class="sect2">
<h3 id="_why_should_i_use_it"><a class="anchor" href="#_why_should_i_use_it"></a>Why should I use it?</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>It&#8217;s simple. In fact, the most simple setup takes less than five minutes.</p>
</li>
<li>
<p>It&#8217;s powerful. You can define any analysis in the DSL, whilst not having to go into the details of the code.</p>
</li>
<li>
<p>It&#8217;s flexible. You need your own analysis step? No problem. You can write your own DSL plugins.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_started"><a class="anchor" href="#_getting_started"></a>1. Getting Started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter provides examples that you can copy/paste to get started with QAvalidator.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Using it: via <a href="#usage-maven">Maven</a>, <a href="#usage-gradle">Gradle</a>, or <a href="#usage-cli">command line</a></p>
</li>
<li>
<p>An example for the <a href="#getting-started-analysis">QAvalidator AnalysisDSL</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_latest_version"><a class="anchor" href="#_latest_version"></a>1.1. Latest version</h3>
<div class="paragraph">
<p>This is the latest released version:</p>
</div>
<div class="imageblock">
<div class="content">
<a class="image" href="https://bintray.com/qa-tse/qavalidator/qav-app/_latestVersion"><img src="https://api.bintray.com/packages/qa-tse/qavalidator/qav-app/images/download.svg" alt="download"></a>
</div>
</div>
</div>
<div class="sect2">
<h3 id="usage-maven"><a class="anchor" href="#usage-maven"></a>1.2. Maven Usage</h3>
<div class="paragraph">
<p>The simplest way to use QAvalidator is via Maven.</p>
</div>
<div class="paragraph">
<p>Just include the Maven plugin into your pom.xml:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;properties&gt;</span>
    <span class="tag">&lt;qav.version&gt;</span>1.2.7<span class="tag">&lt;/qav.version&gt;</span>
<span class="tag">&lt;/properties&gt;</span>

<span class="tag">&lt;build&gt;</span>
    <span class="tag">&lt;plugins&gt;</span>
        <span class="tag">&lt;plugin&gt;</span>
            <span class="tag">&lt;groupId&gt;</span>de.qaware.qav<span class="tag">&lt;/groupId&gt;</span>
            <span class="tag">&lt;artifactId&gt;</span>qav-maven-plugin<span class="tag">&lt;/artifactId&gt;</span>
            <span class="tag">&lt;version&gt;</span>${qav.version}<span class="tag">&lt;/version&gt;</span>
            <span class="tag">&lt;executions&gt;</span>
                <span class="tag">&lt;execution&gt;</span>
                    <span class="tag">&lt;goals&gt;</span>
                        <span class="tag">&lt;goal&gt;</span>qav<span class="tag">&lt;/goal&gt;</span>
                    <span class="tag">&lt;/goals&gt;</span>
                    <span class="comment">&lt;!-- use this in multi-module builds to avoid that
                         QAvalidator is being executed for each sub-project --&gt;</span>
                    <span class="tag">&lt;inherited&gt;</span>false<span class="tag">&lt;/inherited&gt;</span>
                <span class="tag">&lt;/execution&gt;</span>
            <span class="tag">&lt;/executions&gt;</span>
        <span class="tag">&lt;/plugin&gt;</span>
    <span class="tag">&lt;/plugins&gt;</span>
<span class="tag">&lt;/build&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Call the QAvalidator run with this command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>mvn qav:qav</pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="literalblock">
<div class="content">
<pre>mvn de.qaware.qav:qav-maven-plugin:qav</pre>
</div>
</div>
<div class="paragraph">
<p>In this default configuration, QAvalidator checks for the file <code>qa/analysis.groovy</code>. If the file exists, QAvalidator uses it.
If it doesn&#8217;t, QAvalidator runs the default analysis which performs the following analysis steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>QAvalidator reads all the <code>.class</code> files from the project where the plugin is defined (and called), and all of its subprojects.</p>
</li>
<li>
<p>It checks for package cycles.</p>
</li>
<li>
<p>It writes its results into the directory <code>target/qav-report</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="getting-started-analysis"><a class="anchor" href="#getting-started-analysis"></a>1.3. Define Your Own Analysis</h3>
<div class="paragraph">
<p>Defining the analysis run requires to write a little script using the QAvalidator&#8217;s Analysis DSL.</p>
</div>
<div class="paragraph">
<p>We&#8217;ll use the default analysis and see what it does.</p>
</div>
<div class="paragraph">
<p>Put this file in <code>qa/analysis.groovy</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">apply <span class="string"><span class="delimiter">&quot;</span><span class="content">de.qaware.qav.analysis.plugins.ShortcutQavPlugin</span><span class="delimiter">&quot;</span></span>                 <i class="conum" data-value="1"></i><b>(1)</b>

analysis(<span class="string"><span class="delimiter">&quot;</span><span class="content">Step 1: Analyze Package Architecture</span><span class="delimiter">&quot;</span></span>) {                       <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="keyword">def</span> packageGraph = createPackageArchitectureView(inputClassesGraph)  <i class="conum" data-value="3"></i><b>(3)</b>

    <span class="keyword">def</span> packageCycleGraph = findCycles(packageGraph, <span class="string"><span class="delimiter">&quot;</span><span class="content">Package</span><span class="delimiter">&quot;</span></span>)          <i class="conum" data-value="4"></i><b>(4)</b>

    <span class="comment">// output:</span>
    printNodes(packageCycleGraph, <span class="string"><span class="delimiter">&quot;</span><span class="content">packageCycleNodes.txt</span><span class="delimiter">&quot;</span></span>)               <i class="conum" data-value="5"></i><b>(5)</b>
    writeDot(packageGraph, <span class="string"><span class="delimiter">&quot;</span><span class="content">packageGraph</span><span class="delimiter">&quot;</span></span>, architecture(<span class="string"><span class="delimiter">&quot;</span><span class="content">Package</span><span class="delimiter">&quot;</span></span>))      <i class="conum" data-value="6"></i><b>(6)</b>
    writeFile(dependencyGraph, <span class="string"><span class="delimiter">&quot;</span><span class="content">dependencyGraph.json</span><span class="delimiter">&quot;</span></span>)                   <i class="conum" data-value="7"></i><b>(7)</b>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is what happens:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The <code>ShortcutQavPlugin</code> offers some commands we&#8217;ll use in this script. Using the <code>apply</code> command makes them available.</p>
</li>
<li>
<p>An analysis run consists of one or more steps. This analysis has only one step. QAvalidator executes them in an order,
and tries to recover from errors in each step.</p>
</li>
<li>
<p>The command <code>createPackageArchitectureView</code> creates an architecture tree based on the package hierarchy. In this case, it works on the <code>inputClassesGraph</code> which is a graph that represents all classes in the input scope, and no external classes referenced by them.
<code>packageGraph</code> is now a <em>filtered graph</em> which only contains those nodes which belong to the package architecture (i.e. it does not contain nodes representing the classes).</p>
</li>
<li>
<p>Finds cycles on the given graph.</p>
</li>
<li>
<p>Writes out all cycles, i.e. all nodes which belong to a cycle.</p>
</li>
<li>
<p>Writes out the package graph as DOT file, and tries to generate a <code>.png</code> and a <code>.svg</code> file by calling <code>dot</code>,
if graphviz is installed (See <a href="#GraphViz">[GraphViz]</a>). Fails if graphviz is not installed.
Also exports a <code>.graphml</code> file which can be used with <a href="#yEd">[yEd]</a>.</p>
</li>
<li>
<p>Writes out the graph as JSON file, to be loaded e.g. in the Web UI.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Step 4 will mark the step as "failed" if there are any cycles.</p>
</div>
<div class="paragraph">
<p>If you also want the QAvalidator Plugin to break you build, add the following in the Maven plugin configuration,
after the <code>&lt;executions&gt;</code> block, within the <code>&lt;plugin&gt;</code> definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;configuration&gt;</span>
    <span class="tag">&lt;failOnError&gt;</span>true<span class="tag">&lt;/failOnError&gt;</span>
<span class="tag">&lt;/configuration&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_maven_configuration"><a class="anchor" href="#_maven_configuration"></a>1.4. Maven Configuration</h3>
<div class="paragraph">
<p>Here is the full configuration with the Maven Plugin. The example here shows the default values. Override them as needed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;configuration&gt;</span>
    <span class="tag">&lt;analysisFilename&gt;</span>qa/analysis.groovy<span class="tag">&lt;/analysisFilename&gt;</span>
    <span class="tag">&lt;failOnError&gt;</span>false<span class="tag">&lt;/failOnError&gt;</span>
    <span class="tag">&lt;useDefaultInputDirs&gt;</span>true<span class="tag">&lt;/useDefaultInputDirs&gt;</span>
    <span class="tag">&lt;outputDir&gt;</span>target/qav-report<span class="tag">&lt;/outputDir&gt;</span>
<span class="tag">&lt;/configuration&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If no <code>analysisFilename</code> is given, QAvalidator will try these locations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>qa/analysis.groovy</code></p>
</li>
<li>
<p><code>src/qa/analysis.groovy</code></p>
</li>
<li>
<p><code>classpath:/default_analysis.groovy</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="usage-gradle"><a class="anchor" href="#usage-gradle"></a>1.5. Gradle Usage</h3>
<div class="paragraph">
<p>The Gradle Plugin is applied like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath <span class="string"><span class="delimiter">&quot;</span><span class="content">de.qaware.qav:qav-gradle-plugin:1.2.7</span><span class="delimiter">&quot;</span></span>
    }
}

apply <span class="key">plugin</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">de.qaware.qav.gradle.qavalidator</span><span class="delimiter">&quot;</span></span>

<span class="comment">// these are the default values:</span>
qavalidator {
    useDefaultInputDirs = <span class="predefined-constant">true</span>
    failOnError = <span class="predefined-constant">false</span>
    analysisFilename = <span class="string"><span class="delimiter">&quot;</span><span class="content">qa/analysis.groovy</span><span class="delimiter">&quot;</span></span>
    outputDir = <span class="string"><span class="delimiter">&quot;</span><span class="content">build/qav-report</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The configuration shown above shows the default values.</p>
</div>
<div class="paragraph">
<p>If no <code>analysisFilename</code> is given, QAvalidator will try these locations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>qa/analysis.groovy</code></p>
</li>
<li>
<p><code>src/qa/analysis.groovy</code></p>
</li>
<li>
<p><code>classpath:/default_analysis.groovy</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Call the QAvalidator run with this command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>gradlew qavalidator</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="usage-cli"><a class="anchor" href="#usage-cli"></a>1.6. Command Line Usage</h3>
<div class="paragraph">
<p>There is also a command line tool. It needs the analysis file (mandatory), the output directory (optional), and the
input directories (also optional)&#8201;&#8212;&#8201;if the optional arguments are not given on the command line, they must be defined
in the analysis file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ java -jar qav-app-&lt;version&gt;.jar --analysis=&lt;analysis-file&gt; \
                                 [--outputDir=&lt;output-dir&gt;] [input-dirs ...]</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Do not omit the "=" sign in the command line parameters, and do not put whitespace around it.
The input-dirs are non-option arguments.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If no <code>analysis</code> filename is given, QAvalidator will try these locations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>qa/analysis.groovy</code></p>
</li>
<li>
<p><code>src/qa/analysis.groovy</code></p>
</li>
<li>
<p><code>classpath:/default_analysis.groovy</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="usage-hierarchical-projects"><a class="anchor" href="#usage-hierarchical-projects"></a>1.7. Using with Hierarchical Projects</h3>
<div class="paragraph">
<p>The QAvalidator Maven plugin handles both single-module and hierarchical multi-module projects.
Define the plugin and the <code>qa/analysis.groovy</code> file in the top-level project that you which to analyze.
That&#8217;s the project where you call <code>mvn qav:qav</code>.
The following figure gives an example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="txt">my-app
|-- qa
|   \-- analysis.groovy
|-- my-app-parent
|   \-- pom.xml  // this is the parent pom for all other sub-projects.
|-- my-app-api
|   |-- src/...
|   \-- pom.xml
|-- my-app-client
|   |-- src/...
|   \-- pom.xml
|-- my-app-impl
|   |-- src/...
|   \-- pom.xml
|-- my-app-util
|   |-- src/...
|   \-- pom.xml
\-- pom.xml      // define the QAvalidator plugin here</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>It&#8217;s a best practice to have a separate parent pom which defines the dependency management etc. If <code>my-app/pom.xml</code> is also the parent pom, then all sub-projects also inherit all plugins defined there, so each sub-project will execute those plugins. This is no problem, because QAvalidator is defined as an "aggregator plugin", so it will just skip the child modules.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Alternatively, it&#8217;s possible to do separate, disjunct analysis on sub projects.
Then, you need to define the QAvalidator plugin in the sub projects, as shown in this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="txt">my-app
|-- my-app-api
|   |-- src/...
|   \-- pom.xml
|-- my-app-client
|   |-- src/...
|   |   |-- qa
|   |   |   \-- analysis.groovy
|   \-- pom.xml       // define the QAvalidator plugin here
|-- my-app-impl
|   |-- qa
|   |   \-- analysis.groovy
|   |-- src/...
|   \-- pom.xml       // define the QAvalidator plugin here
|-- my-app-util
|   |-- src/...
|   \-- pom.xml
\-- pom.xml</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="qav-architecture-dsl"><a class="anchor" href="#qav-architecture-dsl"></a>2. Architecture Definition and Rules</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter explains some of the underlying ideas and concepts that lead to the design of QAvalidator.</p>
</div>
<div class="sect2">
<h3 id="qav-architecture-dsl-intro"><a class="anchor" href="#qav-architecture-dsl-intro"></a>2.1. Definitions</h3>
<div class="paragraph">
<p>QAvalidator&#8217;s uses a code-centered, static approach to describe software systems.
Its architecture model is built on the following concepts:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">System</dt>
<dd>
<p>A <em>system</em> is the sum of all classes and their relations in the given <em>input scope</em>.
An <em>input scope</em> is a set of classes&#8201;&#8212;&#8201;usually all the classes of a project, e.g. like a Maven module with all its sub modules.</p>
</dd>
<dt class="hdlist1">Architecture and Architecture View</dt>
<dd>
<p>There is one or more <em>architectures</em> or <em>architecture views</em> to describe a system.
An <em>architecture view</em> is a hierarchy of <em>components</em>.
It is possible to have more than one <em>architecture view</em> to express different considerations. Typical examples are the
technical view with a layered architecture, and a business view with vertical slices per business component.
 <br>
We&#8217;ll use the terms <em>architecture</em> and <em>architecture view</em> as synonyms.</p>
</dd>
<dt class="hdlist1">Component</dt>
<dd>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>A <em>component</em> has one or more interfaces (APIs) and an implementation. The APIs are public, the implementation is a
private detail of the component.</p>
</li>
<li>
<p>A component may <em>use</em> other components.  To be precise: a component may use other components' <em>APIs</em>&#8201;&#8212;&#8201;it may never
use their <em>implementations</em> directly.</p>
</li>
<li>
<p>A component may <em>contain</em> other components, forming a <em>hierarchy</em>. We also speak of <em>nested components</em>.</p>
</li>
</ol>
</div>
</dd>
<dt class="hdlist1">Class</dt>
<dd>
<p>A class is the detailed level to look at a system. A software system is constructed by combining many classes. Classes have relations to other classes: they use them, inherit from them, etc.<br>
A class is the atomic element QAvalidator works with. This is an arbitrary decision&#8201;&#8212;&#8201;one could also look at methods or instructions. That would make sense e.g. when analyzing data flow etc; however, we&#8217;re interested in the <em>structure</em> of a system. On the other hand, it&#8217;s not hard-coded into QAvalidator to look at classes. In fact, QAvalidator works with graphs and trees, and consequently abstracts from the type of the atomic element of analysis.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>As we&#8217;ll see in the sections <a href="#qav-architecture-dsl-example">Architecture DSL Example</a> and <a href="#qav-architecture-dsl-reference">Architecture Model DSL Reference</a>,
QAvalidator directly translates these concepts into its Architecture DSL.</p>
</div>
<div class="sect3">
<h4 id="_using_graphs_to_model_systems_architectures_and_components"><a class="anchor" href="#_using_graphs_to_model_systems_architectures_and_components"></a>2.1.1. Using Graphs to Model Systems, Architectures, and Components</h4>
<div class="paragraph">
<p>We use plain graphs and hierarchical graphs to model systems, architectures, and components.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Graph</dt>
<dd>
<p>A graph consists of <em>nodes</em> (aka: <em>vertices</em>) and <em>edges</em> (aka: <em>dependencies</em>, <em>relations</em>).
We use <em>directed graphs</em>, i.e. the edges have a direction with a source and target.</p>
</dd>
<dt class="hdlist1">Hierarchical Graph</dt>
<dd>
<p>A <em>hierarchical graph</em> combines a graph and a hierarchical tree by assigning the nodes in the graph to the leaves of the tree.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><em>(TODO: add a figure.)</em></p>
</div>
<div class="paragraph">
<p>To model a software system with a hierarchical graph, the nodes in the graph represent classes, and the edges in the graph represent relations of different types.
The graph represents the system <em>as it really is</em>, with the real dependencies as they are implemented in the code.</p>
</div>
<div class="paragraph">
<p>An architecture view is a hierarchy of components. This is the tree part of the hierarchical graph.
The leaf components have classes assigned which implement them.</p>
</div>
<div class="paragraph">
<p>The architecture hierarchy can either be used to explain the <em>intended</em> architecture; QAvalidator can be used to check if there is a gap between plan and reality.
Or QAvalidator can be used the other way around to visualize the structure of the system in a graphical, textual, or interactive way.</p>
</div>
<div class="paragraph">
<p>There may be one or more architecture views. The architecture views are independent of one another. Apart from being associated with the same nodes in the graph, they don&#8217;t have anything to do with each other.</p>
</div>
</div>
<div class="sect3">
<h4 id="_literature"><a class="anchor" href="#_literature"></a>2.1.2. Literature</h4>
<div class="paragraph">
<p>For some background on this architecture model, see also <a href="#AP11">[AP11]</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_limitations"><a class="anchor" href="#_limitations"></a>2.1.3. Limitations</h4>
<div class="paragraph">
<p>QAvalidator is strictly focused on the code view. QAvalidator does not, for example, consider runtime properties like
number of instances of a class, number of calls to a component, or performance properties like CPU or memory usage.
It also does not describe deployment views of a software system.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="qav-architecture-dsl-example"><a class="anchor" href="#qav-architecture-dsl-example"></a>2.2. Architecture DSL Example</h3>
<div class="paragraph">
<p>This is an example architecture definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">architecture(<span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">T-View</span><span class="delimiter">&quot;</span></span>, <span class="key">prefix</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">tview</span><span class="delimiter">&quot;</span></span>, <span class="key">reflexMLversion</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">1.0</span><span class="delimiter">&quot;</span></span>) {

    excludes <span class="string"><span class="delimiter">&quot;</span><span class="content">java.lang.**</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">java.util.**</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">org.slf4j.**</span><span class="delimiter">&quot;</span></span>

    component (<span class="string"><span class="delimiter">&quot;</span><span class="content">Monitor</span><span class="delimiter">&quot;</span></span>) {
        <span class="comment">// uses &quot;IMail&quot; --&gt; is allowed implicitly, because the components are siblings</span>
        impl <span class="string"><span class="delimiter">&quot;</span><span class="content">de.qaware.mail.monitor.**</span><span class="delimiter">&quot;</span></span>
    }

    component (<span class="string"><span class="delimiter">&quot;</span><span class="content">Mail</span><span class="delimiter">&quot;</span></span>) {
        api <span class="string"><span class="delimiter">&quot;</span><span class="content">IMail</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">de.qaware.mail.api.**</span><span class="delimiter">&quot;</span></span>
        impl <span class="string"><span class="delimiter">&quot;</span><span class="content">de.qaware.mail.impl.**</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">de.qaware.mail.impl2.**</span><span class="delimiter">&quot;</span></span>

        component (<span class="string"><span class="delimiter">&quot;</span><span class="content">MailSender</span><span class="delimiter">&quot;</span></span>) {
            api <span class="string"><span class="delimiter">&quot;</span><span class="content">de.qaware.mail.sender.api.**</span><span class="delimiter">&quot;</span></span>
            impl <span class="string"><span class="delimiter">&quot;</span><span class="content">de.qaware.mail.sender.impl.JavaMailSender</span><span class="delimiter">&quot;</span></span>
            uses <span class="string"><span class="delimiter">&quot;</span><span class="content">JavaMail</span><span class="delimiter">&quot;</span></span>
        }
    }

    component (<span class="string"><span class="delimiter">&quot;</span><span class="content">3rdParty</span><span class="delimiter">&quot;</span></span>) {
        component(<span class="string"><span class="delimiter">&quot;</span><span class="content">JavaMail</span><span class="delimiter">&quot;</span></span>) {api <span class="string"><span class="delimiter">&quot;</span><span class="content">javax.mail.**</span><span class="delimiter">&quot;</span></span>}
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="qav-architecture-dsl-reference"><a class="anchor" href="#qav-architecture-dsl-reference"></a>2.3. Architecture Model DSL Reference</h3>
<div class="paragraph">
<p>This section contains the detailed definition of the Architecture DSL.</p>
</div>
<div class="paragraph">
<p>The Architecture DSL is a Groovy DSL; this explains most of the syntax we use. Valid Groovy code is possible anywhere.</p>
</div>
<div class="sect3">
<h4 id="_keywords"><a class="anchor" href="#_keywords"></a>2.3.1. Keywords</h4>
<div class="paragraph">
<p>These are the QAvalidator Architecture DSL Keywords:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">architecture</dt>
<dd>
<p><code>architecture</code> has three attributes to be set: The <code>name</code> is used in reports, the <code>prefix</code> is required for technical
purpuses (like the DOT export), and the attribute <code>reflexMLversion</code> indicates the DSL version being used.
In curly braces, it accepts the same declarations as <em>components</em>.<br>
In each architecture file, there may be one or more architecture definitions.</p>
</dd>
<dt class="hdlist1">component</dt>
<dd>
<p><code>component</code> describes a component as defined in section <a href="#qav-architecture-dsl-intro">Definitions</a>. It has one parameter which is
the component&#8217;s name; in curly braces it defines the component&#8217;s properties: <em>api</em>, <em>impl</em>, <em>uses</em>, <em>ignore</em>.</p>
</dd>
<dt class="hdlist1">api</dt>
<dd>
<p>There is one ore more API per component. Each API has a name; if there is only one API, its name defaults to the
component&#8217;s name. The API name must be unique for the system&#8201;&#8212;&#8201;not only within that component.</p>
<div class="paragraph">
<p>There are two forms to define an API: With name, it&#8217;s the "colon" syntax with the name of the API, then a colon, and
then a list of regular expressions defining matching classes.
(For Groovy guys: This is the <em>map</em> syntax with a String as key, and a List of Strings as value.)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">api <span class="string"><span class="delimiter">&quot;</span><span class="content">adminApi</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">com.mycompany.comp1.api.admin.*</span><span class="delimiter">&quot;</span></span>
api <span class="string"><span class="delimiter">&quot;</span><span class="content">userApi</span><span class="delimiter">&quot;</span></span>  : <span class="string"><span class="delimiter">&quot;</span><span class="content">com.mycompany.comp1.api.user.*</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">com.mycompany.comp1.api.settings.*</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Without name, it&#8217;s just a list of regular expressions defining matching classes. This api will automatically get the
name of its component.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">api <span class="string"><span class="delimiter">&quot;</span><span class="content">com.mycompany.comp1.api.admin.*</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">com.mycompany.comp1.api.user.*</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">com.mycompany.comp1.api.settings.*</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
</dd>
<dt class="hdlist1">impl</dt>
<dd>
<p>The <code>impl</code> keyword defines the component&#8217;s implementation. It works similar to the <code>api</code> keyword, but there is only
one implementation per component. Therefore, there is no name for an implementation, and the <code>impl</code> keyword just takes
a list of regular expressions, defining all implementation classes.</p>
</dd>
<dt class="hdlist1">uses</dt>
<dd>
<p>The keyword <code>uses</code> defines all APIs this component uses. It receives a list of all API names that it may use.
It&#8217;s allowed to define the <code>uses</code> keyword more than once.<br>
Note that this keyword takes the list of <em>API names</em>, not component names. Note also that for components which offer
only one API, the API name defaults to the component&#8217;s name.</p>
</dd>
<dt class="hdlist1">usesImpl</dt>
<dd>
<p>The keyword <code>usesImpl</code> defines all implementation parts this component may use.
It&#8217;s allowed to define the <code>usesImpl</code> keyword more than once.
This feature exists to be able to define factories which need to create instances of a specific implementation class; it is also useful e.g. for Spring 4 configurations.</p>
</dd>
<dt class="hdlist1">excludes</dt>
<dd>
<p>(Formerly also: <code>ignore</code>.)
The keyword <code>excludes</code> allows to define a list of patterns (Ant-style) which match classes that should be ignored in the
analysis.<br>
It is often used to exclude commonly used classes like from the JDK, but also logging frameworks or other common
libraries, or utility classes used througout the project.</p>
</dd>
<dt class="hdlist1">includes</dt>
<dd>
<p>If this is defined, only explicitly included file name patterns (Ant-style) which match classes to be included. Everything else will be excluded. If not defined, everything&#8201;&#8212;&#8201;except the explicitly excluded files (see keyword <code>excludes</code>)&#8201;&#8212;&#8201;will be included.</p>
</dd>
<dt class="hdlist1">pathSeparator</dt>
<dd>
<p>If defined, this String is used for the matching patterns in <code>api</code>, <code>impl</code>, <code>includes</code>, and <code>excludes</code> clauses.</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_code_mapping"><a class="anchor" href="#_code_mapping"></a>2.3.2. Code Mapping</h4>
<div class="paragraph">
<p>As of QAvalidator 1.0, code mapping is done using QAvalidator&#8217;s flavor of AOP Pointcut syntax.
It works like this:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>"*" is one package name, i.e. any number of characters except a "."</p>
</li>
<li>
<p>"**" is one or more package names, i.e. any number of characters including a "."</p>
</li>
<li>
<p>If "*" is the last package names, it&#8217;s handled like "**".</p>
<div class="ulist">
<ul>
<li>
<p><em>Deprecated rule. This will be removed in one of the next releases, so change your Architecture definition and replace</em>
<code>my.prefix.*</code> <em>by</em> <code>my.prefix.**</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>"." in the pattern is a dot, it&#8217;s not "any character" as in regular expressions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This is very similar to Ant path matching (in fact, that&#8217;s the implementation we use; with the "." as default path
separator, or the separator defined with the keyword <code>pathSeparator</code>).</p>
</div>
<div class="paragraph">
<p>QAvalidator keeps the order of definition in the architecture file. Whenever it matches a class name to an API or
implementation, it starts at the top, and goes down to the bottom. The first match is the result.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_rules"><a class="anchor" href="#_rules"></a>2.4. Rules</h3>
<div class="paragraph">
<p>QAvalidator uses the architecture description to check the dependencies found in the Bytecode.</p>
</div>
<div class="sect3">
<h4 id="_qavalidator_rules"><a class="anchor" href="#_qavalidator_rules"></a>2.4.1. QAvalidator Rules</h4>
<div class="paragraph">
<p>QAvalidator checks that each dependency in the architecture view is covered by one of the following rules:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Is the target of the dependency an API or an implementation of a component? If it&#8217;s the latter, QAvalidator
currently issues a warning. This may be changed to raising an error as soon as QAvalidator allows to define expected
accessors to implementations.</p>
</li>
<li>
<p>Is the dependency allowed because the accessed component lies in the same namespace as the using component? Note
that access to nested components is not allowed, only directly visible components may be used.
In the example above, <code>Monitor</code> may access <code>IMail</code> because it&#8217;s on the same level, but not <code>MailSender</code> because
it&#8217;s a nested component of <code>Mail</code> and may be an implementation detail. The architect may allow the access be using
the <code>uses</code> keyword.</p>
</li>
<li>
<p>Is the dependency explicitly allowed via the <code>uses</code> keyword.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Compare the code in the package <code>de.qaware.qav.core.architecture.checker</code>:
The class <code>ArchitectureChecker</code> combines the checks of <code>DependencyChecker</code> and <code>AllComponentsImplementedChecker</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_nested_components_and_namespaces"><a class="anchor" href="#_nested_components_and_namespaces"></a>2.4.2. Nested Components and Namespaces</h4>
<div class="paragraph">
<p>The <a href="#fig-namespace1">next figure</a> shows an example for a system "S", with a number of hierarchically nested components,
called "A", "A1", etc.
The arrows indicate which dependencies are allowed and which are forbidden by the default rules.</p>
</div>
<div id="fig-namespace1" class="imageblock">
<div class="content">
<img src="./img/namespace1.png" alt="namespace1">
</div>
<div class="title">Figure 1. Namespaces</div>
</div>
<div class="ulist">
<ul>
<li>
<p>1: A &#8594; B: is allowed, because they have the same parent.</p>
</li>
<li>
<p>2: A3 &#8594; B1: is forbidden, because they have no common parent. B1 is nested too deeply.</p>
</li>
<li>
<p>3: A22 &#8594; A3: is allowed, because A22 is a child of A2, and A2 and A3 have the same parent.</p>
</li>
<li>
<p>4: A1 &#8594; A21: is forbidden, because A21 is a child of A2. It&#8217;s nested too deeply; its existence is (or at least: may be)
an implementation detail of component A2. Therefore, access from A1 is not allowed implicitly.</p>
</li>
<li>
<p>5: A22 &#8594; B1: same reasoning as number 4.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It&#8217;s really important to understand the difference in reasoning of number 3 and number 4.
The essence is that the existence of child components as well as their separation of concerns may be a design or
implementation decision of the parent component. In the example above, the components A21 and A22 could be collapsed and
subsumed into A2.
Therefore the access from outside components is not allowed by default.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s now consider another example which shows the effect of the <em>"uses"</em> keyword in the <a href="#fig-namespace2">next figure</a>.</p>
</div>
<div id="fig-namespace2" class="imageblock">
<div class="content">
<img src="./img/namespace2.png" alt="namespace2">
</div>
<div class="title">Figure 2. Explicit USES definition</div>
</div>
<div class="paragraph">
<p>Now, the relations 2: A3 &#8594; B1 and 5: A22 &#8594; B1 are <em>allowed</em>, because the dependency A &#8594; B1 is allowed explicitly by
the <em>uses</em> keyword. Note that allowing a dependency with the <em>"uses"</em> keyword also allows dependencies from children of
the <em>source</em> of the dependency.</p>
</div>
</div>
<div class="sect3">
<h4 id="_related_work"><a class="anchor" href="#_related_work"></a>2.4.3. Related Work</h4>
<div class="paragraph">
<p>This section compares the QAvalidator architecture rules against the rules postulated in <a href="#AP11">[AP11]</a>.</p>
</div>
<div class="paragraph">
<p><a href="#AP11">[AP11]</a> defines the following architecture rules:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">A) Dependencies are only allowed towards interfaces</dt>
<dd>
<p>This postulation doesn&#8217;t allow for factories and constructions like Spring 4 configurations.
QAvalidator issues a warning.</p>
</dd>
<dt class="hdlist1">B) Only dependencies to interfaces in the same namespace are allowed</dt>
<dd>
<p>QAvalidator works slightly different: Dependencies in the same namespace are allowed by default.
It&#8217;s possible to explicitly allow dependencies which are "further away" by using the <code>uses</code> keyword.</p>
</dd>
<dt class="hdlist1">C) Each component and interface element of a component model has to be reflected to code</dt>
<dd>
<p>There is a strict mapping from code to architecture components. There is also a check that each component has
corresponding classes in the code base.</p>
</dd>
<dt class="hdlist1">D) Relations between component model elements (components and interfaces) and code elements (types) must be 1-to-N relationships</dt>
<dd>
<p>There is a strict mapping from code to architecture components.</p>
</dd>
<dt class="hdlist1">E) Any existing architecture-level dependency must be represented by at least one code-level dependency (no absence)</dt>
<dd>
<p>All explicitly allowed dependency (via the <code>uses</code> keyword) are checked against the actual code base.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="qav-analysis-dsl"><a class="anchor" href="#qav-analysis-dsl"></a>3. Analysis DSL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A QAvalidator analysis is composed of these types of operations which can be combined using the QAvalidator Analysis DSL:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Read Input</p>
</li>
<li>
<p>Create architecture views on a graph (full graph or filtered graph)</p>
</li>
<li>
<p>Manipulation</p>
</li>
<li>
<p>Validation, according to specified rules</p>
</li>
<li>
<p>Export and Visualization</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>This chapter gives a detailed definition of the QAvalidator Analysis DSL.</p>
</div>
<div class="sect2">
<h3 id="_example"><a class="anchor" href="#_example"></a>3.1. Example</h3>
<div class="paragraph">
<p>Before diving in, here is an example of an analysis DSL.</p>
</div>
<div class="paragraph">
<p>It is commented inline to explain what&#8217;s going on.
Based on this working example, the reference part for the analysis DSL should be easier to read.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">import</span> <span class="include">de.qaware.qav.graph.api.DependencyType</span>

apply <span class="string"><span class="delimiter">&quot;</span><span class="content">de.qaware.qav.analysis.plugins.ShortcutQavPlugin</span><span class="delimiter">&quot;</span></span>

<span class="comment">// note: here are no inputJava and outuptDir statements. Use this file from within a</span>
<span class="comment">// Maven build, and those values will be set automatically.</span>

analysis(<span class="string"><span class="delimiter">&quot;</span><span class="content">Step 1: Analyze Package Architecture</span><span class="delimiter">&quot;</span></span>) {
    <span class="comment">// Prepare input: analyze the graph and create an architecture tree, based on</span>
    <span class="comment">// the package hierarchy:</span>
    <span class="comment">// packageGraph is now a filtered graph which only contains those nodes which</span>
    <span class="comment">// belong to the package architecture (i.e. it does not contain the class nodes).</span>
    <span class="keyword">def</span> packageGraph = createPackageArchitectureView(inputClassesGraph)

    <span class="keyword">def</span> packageCycleGraph = findCycles(packageGraph, <span class="string"><span class="delimiter">&quot;</span><span class="content">Package</span><span class="delimiter">&quot;</span></span>)

    <span class="comment">// output:</span>
    printNodes(packageCycleGraph, <span class="string"><span class="delimiter">&quot;</span><span class="content">packageCycleNodes.txt</span><span class="delimiter">&quot;</span></span>)
    writeDot(packageGraph, <span class="string"><span class="delimiter">&quot;</span><span class="content">packageGraph</span><span class="delimiter">&quot;</span></span>, architecture(<span class="string"><span class="delimiter">&quot;</span><span class="content">Package</span><span class="delimiter">&quot;</span></span>))
}

analysis(<span class="string"><span class="delimiter">&quot;</span><span class="content">Step 2: Prepare T-View Architecture</span><span class="delimiter">&quot;</span></span>) {
    <span class="comment">// Read the given Architecture DSL file. The architecture will be available</span>
    <span class="comment">// under the name defined in the Architecture DSL file; it can be accessed</span>
    <span class="comment">// with: architecture(&quot;T-View&quot;)</span>
    readArchitecture <span class="string"><span class="delimiter">&quot;</span><span class="inline"><span class="inline-delimiter">${</span>systemName<span class="inline-delimiter">}</span></span><span class="content">_architecture.groovy</span><span class="delimiter">&quot;</span></span>

    <span class="comment">// Use that architecture and apply it on the dependency graph.</span>
    <span class="comment">// Do so twice: once for the full graph, and once only on the part of graph</span>
    <span class="comment">// which represents only classes from the input scope (leaving out referenced</span>
    <span class="comment">// 3rd-party classes).</span>
    architectureTView = createArchitectureView(allClassesGraph, architecture(<span class="string"><span class="delimiter">&quot;</span><span class="content">T-View</span><span class="delimiter">&quot;</span></span>))
    architectureTViewOnInput = createArchitectureView(
                    inputClassesGraph, architecture(<span class="string"><span class="delimiter">&quot;</span><span class="content">T-View</span><span class="delimiter">&quot;</span></span>), <span class="string"><span class="delimiter">&quot;</span><span class="content">T-View-on-Input</span><span class="delimiter">&quot;</span></span>)
}

analysis(<span class="string"><span class="delimiter">&quot;</span><span class="content">Step 3: Analyze and check for violations</span><span class="delimiter">&quot;</span></span>) {
    <span class="comment">// Check all architecture rules: all relations must be covered in the architecture</span>
    <span class="comment">// definition, all components must actually be implemented, and all rules in the</span>
    <span class="comment">// architecture file are really used.</span>
    checkArchitectureRules(architectureTView, architecture(<span class="string"><span class="delimiter">&quot;</span><span class="content">T-View</span><span class="delimiter">&quot;</span></span>))

    <span class="comment">// Find cycles on the component level</span>
    architectureTViewCycleGraph = findCycles(architectureTView, <span class="string"><span class="delimiter">&quot;</span><span class="content">T-View</span><span class="delimiter">&quot;</span></span>)
}

analysis(<span class="string"><span class="delimiter">&quot;</span><span class="content">Step 4: Export as DOT, GraphML, and JSON</span><span class="delimiter">&quot;</span></span>) {
    <span class="comment">// graphical export as DOT (for GraphViz) and GraphML (for yEd)</span>
    writeDot(architectureTView, <span class="string"><span class="delimiter">&quot;</span><span class="content">architectureTView</span><span class="delimiter">&quot;</span></span>, architecture(<span class="string"><span class="delimiter">&quot;</span><span class="content">T-View</span><span class="delimiter">&quot;</span></span>))
    writeDot(architectureTViewCycleGraph, <span class="string"><span class="delimiter">&quot;</span><span class="content">architectureTViewCycleGraph</span><span class="delimiter">&quot;</span></span>,
                    architecture(<span class="string"><span class="delimiter">&quot;</span><span class="content">T-View</span><span class="delimiter">&quot;</span></span>))
    writeDot(architectureTViewOnInput, <span class="string"><span class="delimiter">&quot;</span><span class="content">architectureTViewOnInput</span><span class="delimiter">&quot;</span></span>,
                    architecture(<span class="string"><span class="delimiter">&quot;</span><span class="content">T-View</span><span class="delimiter">&quot;</span></span>))

    <span class="comment">// this is to import it into qav-server for interactive exploration of the</span>
    <span class="comment">// dependency graph</span>
    writeFile(dependencyGraph, <span class="string"><span class="delimiter">&quot;</span><span class="content">dependencyGraph.json</span><span class="delimiter">&quot;</span></span>)
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_overview_and_dsl_plugins"><a class="anchor" href="#_overview_and_dsl_plugins"></a>3.2. Overview and DSL Plugins</h3>
<div class="paragraph">
<p>The QAvalidator Analysis DSL a Groovy DSL. So valid Groovy code may be used anywhere.</p>
</div>
<div class="paragraph">
<p>Only some core concepts are implemented with a few hard-coded elements.
The heavy lifting is done in plugins.
These are the core concepts and the corresponding language features:</p>
</div>
<div class="sect3">
<h4 id="_analysis_steps"><a class="anchor" href="#_analysis_steps"></a>3.2.1. Analysis Steps</h4>
<div class="paragraph">
<p>Analysis is done in steps.</p>
</div>
<div class="sect4">
<h5 id="_analysis"><a class="anchor" href="#_analysis"></a>analysis</h5>
<div class="paragraph">
<p>QAvalidator will execute all <code>analysis</code> blocks in the order of their appearance.
It will print their duration and their success.
Analysis steps will fail if they detect a <code>violations</code>, or if there are unexpected errors (aka Exceptions).</p>
</div>
<div class="paragraph">
<p>An analysis run which has at least one <em>failed</em> analysis step will be considered as <em>failed</em>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>description</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Accepts a brief description of the analysis block</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>closure</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>code to execute in that analysis</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_error_handling"><a class="anchor" href="#_error_handling"></a>3.2.2. Error handling</h4>
<div class="paragraph">
<p>QAvalidator distinguishes between <em>error</em> and <em>violation</em>
(this is similar to a unit test which may be ok, produce an error, or may have failed).</p>
</div>
<div class="sect4">
<h5 id="_error"><a class="anchor" href="#_error"></a>error</h5>
<div class="paragraph">
<p>Throws a new <code>IllegalStateException</code> with the given message.</p>
</div>
<div class="paragraph">
<p>This is meant for technical error which should not happen in the course of the analysis.
QAvalidator will log the message and the full stack trace to help debugging the analysis script.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>message</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The message, to throw as <code>IllegalStateException</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_violation"><a class="anchor" href="#_violation"></a>violation</h5>
<div class="paragraph">
<p>Accepts a message (a <code>String</code>), and notes it in the <code>context</code> (see next section).</p>
</div>
<div class="paragraph">
<p>This is meant for architecture violations which are detected by the QAvalidator analysis run.
This is not an error (the analysis run could do all its work), but it&#8217;s not a success (as the analyzed system contains
architectural flaws).
QAvalidator will log the messages, and mark the analysis step as <em>failed</em>.
See section <a href="#qav-analysis-dsl-fail-build">Failing the Build</a>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>message</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The message to describe the violation.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_common_data"><a class="anchor" href="#_common_data"></a>3.2.3. Common data</h4>
<div class="paragraph">
<p>The analysis script may use the <code>context</code> to store objects, or to pass objects from one step to another.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>QAvalidator uses the context to create the initial graph (<code>context.dependencyGraph</code>).</p>
</li>
<li>
<p>The <code>JavaQavPlugin</code> uses this graph and creates a node for each class, and an edge for each dependency of every class.
All other plugins use this graph to read it, and to work with it.</p>
</li>
<li>
<p>The <code>ShortcutQavPlugin</code> also makes heavy use of this feature, and provides prepared data and tools like filters in the context.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_plugins"><a class="anchor" href="#_plugins"></a>3.2.4. Plugins</h4>
<div class="paragraph">
<p>Analysis is implemented in plugins</p>
</div>
<div class="sect4">
<h5 id="_apply"><a class="anchor" href="#_apply"></a>apply</h5>
<div class="paragraph">
<p>Applying a plugin makes the language features of that plugin available to the analysis script.</p>
</div>
<div class="paragraph">
<p>The plugins offer a number of features used in many analysis.
So typically, they will be used to compose new analysis.
If necessary, new plugins can be added for other or more specific jobs.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>plugin</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Accepts an object which must implement the interface <code>de.qaware.qav.analysis.dsl.model.QavPlugin</code>,
or a String with a fully qualified name of a plugin&#8201;&#8212;&#8201;which must also implement the interface <code>QavPlugin</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="qav-analysis-dsl-input-scope"><a class="anchor" href="#qav-analysis-dsl-input-scope"></a>3.3. Input Scope</h3>
<div class="paragraph">
<p>QAvalidator works on <em>input scopes</em> which define the system to analyze.</p>
</div>
<div class="paragraph">
<p>As of version 1.0, QAvalidator can read Java (<code>.class</code> files) and Maven POMs as input.</p>
</div>
<div class="paragraph">
<p>For all upcoming analysis steps, it is not relevant where the initial graph comes from. From then on, QAvalidator uses
nodes and edges, attributes on them (like types) etc. for its analysis.
All analysis is language-agnostic; apart from the <code>JavaQavPlugin</code> which reads <code>.class</code> files, there is nothing
Java-specific in QAvalidator.</p>
</div>
<div class="paragraph">
<p>One feature is that new languages may be added by implementing a new input scope reader.
More important is the fact that the <em>architecture model</em> employed by QAvalidator is not language-specific.</p>
</div>
<div class="sect3">
<h4 id="_javaqavplugin"><a class="anchor" href="#_javaqavplugin"></a>3.3.1. JavaQavPlugin</h4>
<div class="paragraph">
<p>Provides the Java input for QAvalidator</p>
</div>
<div class="sect4">
<h5 id="_inputjava"><a class="anchor" href="#_inputjava"></a>inputJava</h5>
<div class="paragraph">
<p>Read all <code>"*.class"</code> files under the given directories, and add them to the
<code>DependencyGraph</code> which <em>must</em> exist in the context.
Lets the user decide if he wants to collapse inner classes.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>parameters</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Accepts a map with <code>includes</code> and <code>excludes</code> patterns which work in Ant-style; this defines
where it recursively searches all <code>*.class</code> files.</p>
</div>
<div class="paragraph">
<p>This command may be called multiple times. The directory names are added (not replaced).
For each call, it is possible to tell whether inner classes should be collapsed, i.e. folded
onto the outer class, or not.</p>
</div>
<div class="paragraph">
<p>The <code>JavaQavPlugin</code> reads all the class files and analyzes them (using ASM). For each class, it
creates a node in the <code>context.dependencyGraph</code>, and for each dependency it creates an edge in
that graph. A dependency can be a method call to another class, or a class implementing an
interface, or a class calling the constructor of another class. The <code>JavaQavPlugin</code> uses
different dependency types for these relationships.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>collapseInnerClasses</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>true</code> to collapse inner classes (the default behavior). Collapsing means that all
class-level relationships will be handled as if they would affect the outer class.
<code>false</code> will preserve the full class names, like e.g. <code>YourClass.1</code> or <code>OuterClass.InnerClass</code>.</p>
</div>
<div class="paragraph">
<p>Defaults to true.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_inputjava_2"><a class="anchor" href="#_inputjava_2"></a>inputJava</h5>
<div class="paragraph">
<p>Read all <code>"*.class"</code> files under the given directories, and add them to the
<code>DependencyGraph</code> which <em>must</em> exist in the context.
Collapses inner classes, i.e. folds inner classes onto the outer class; all class-level
relationships will be handled as if they would affect the outer class.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>classesRootDirNames</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Accepts one or more directories where it recursively searches all <code>*.class</code> files.</p>
</div>
<div class="paragraph">
<p>This command may be called multiple times. The directory names are added (not replaced).</p>
</div>
<div class="paragraph">
<p>The <code>JavaQavPlugin</code> reads all the class files and analyzes them (using ASM). For each class, it
creates a node in the <code>context.dependencyGraph</code>, and for each dependency it creates an edge in
that graph. A dependency can be a method call to another class, or a class implementing an
interface, or a class calling the constructor of another class. The <code>JavaQavPlugin</code> uses
different dependency types for these relationships.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_inputjava_3"><a class="anchor" href="#_inputjava_3"></a>inputJava</h5>
<div class="paragraph">
<p>Read all <code>"*.class"</code> files under the given directories, and add them to the
<code>DependencyGraph</code> which <em>must</em> exist in the context.
Lets the user decide if he wants to collapse inner classes.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>collapseInnerClasses</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>true</code> to collapse inner classes (the default behavior). Collapsing means that all
class-level relationships will be handled as if they would affect the outer class.
<code>false</code> will preserve the full class names, like e.g. <code>YourClass.1</code> or <code>OuterClass.InnerClass</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>classesRootDirNames</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Accepts one or more directories where it recursively searches all <code>*.class</code> files.</p>
</div>
<div class="paragraph">
<p>This command may be called multiple times. The directory names are added (not replaced).
For each call, it is possible to tell whether inner classes should be collapsed, i.e. folded
onto the outer class, or not.</p>
</div>
<div class="paragraph">
<p>The <code>JavaQavPlugin</code> reads all the class files and analyzes them (using ASM). For each class, it
creates a node in the <code>context.dependencyGraph</code>, and for each dependency it creates an edge in
that graph. A dependency can be a method call to another class, or a class implementing an
interface, or a class calling the constructor of another class. The <code>JavaQavPlugin</code> uses
different dependency types for these relationships.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_mavenqavplugin"><a class="anchor" href="#_mavenqavplugin"></a>3.3.2. MavenQavPlugin</h4>
<div class="paragraph">
<p>Provides the Maven input for QAvalidator</p>
</div>
<div class="sect4">
<h5 id="_inputmaven"><a class="anchor" href="#_inputmaven"></a>inputMaven</h5>
<div class="paragraph">
<p>Reads all pom.xml files and creates <code>mavenDependencyGraph</code> and <code>maven</code> Architecture.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>rootDirName</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The path to the root pom file</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_tracesqavplugin"><a class="anchor" href="#_tracesqavplugin"></a>3.3.3. TracesQavPlugin</h4>
<div class="paragraph">
<p>Provides the Traces input for QAvalidator.</p>
</div>
<div class="sect4">
<h5 id="_inputtraces"><a class="anchor" href="#_inputtraces"></a>inputTraces</h5>
<div class="paragraph">
<p>Reads Zipkin Traces JSON export file and creates the tracesDependencyGraph.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>filename</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The path to the Zipkin Traces JSON export file</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_typescriptqavplugin"><a class="anchor" href="#_typescriptqavplugin"></a>3.3.4. TypescriptQavPlugin</h4>
<div class="paragraph">
<p>Provides the Typescript input for QAvalidator.</p>
</div>
<div class="sect4">
<h5 id="_inputtypescript"><a class="anchor" href="#_inputtypescript"></a>inputTypescript</h5>
<div class="paragraph">
<p>Reads Typescript XML export file and creates the typescriptDependencyGraph.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>filename</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The path to the Typescript XML export file</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_and_working_with_architecture_views_on_a_graph"><a class="anchor" href="#_creating_and_working_with_architecture_views_on_a_graph"></a>3.4. Creating and Working with Architecture Views on a Graph</h3>
<div class="paragraph">
<p>An architecture view is a hierarchy of components above a certain input. It is a tree where the inner nodes are
architecture components, and the leaves are the elements of the input scope (see section <a href="#qav-analysis-dsl-input-scope">Input Scope</a>).</p>
</div>
<div class="paragraph">
<p>There may be an arbitrary number of architecture views on an input graph. Different architecture views are independent
from each other. See section <a href="#qav-architecture-dsl-intro">Definitions</a> for a definition of an "architecture view".</p>
</div>
<div class="sect3">
<h4 id="_architectureqavplugin"><a class="anchor" href="#_architectureqavplugin"></a>3.4.1. ArchitectureQavPlugin</h4>
<div class="paragraph">
<p>Operations offered by the ArchitectureQavPlugin:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Read an Architecture:</p>
<div class="ulist">
<ul>
<li>
<p>Read an Architecture DSL file</p>
</li>
<li>
<p>Use the Package Structure as Architecture View</p>
</li>
</ul>
</div>
</li>
<li>
<p>Working with Architecture Views</p>
</li>
<li>
<p>Create an Architecture View</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_addarchitecture"><a class="anchor" href="#_addarchitecture"></a>addArchitecture</h5>
<div class="paragraph">
<p>Add an architecture. This command is useful for other plugins; it will probably not be used in Analysis DSL scripts.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>architecture</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>the <code>Architecture</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_architecture"><a class="anchor" href="#_architecture"></a>architecture</h5>
<div class="paragraph">
<p>QAvalidator stores all Architectures centrally under a unique name.
For an architecture that is defined using the DSL, that name is defined in the DSL.
For an architecture derived from the actual package hierarchy, it is "Package".</p>
</div>
<div class="paragraph">
<p>This command returns the <code>Architecture</code> registered under the given name,
or null if no architecture is registered under that name.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>name</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The name.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Result</dt>
<dd>
<p>The <code>Architecture</code> or null.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_createarchitectureview"><a class="anchor" href="#_createarchitectureview"></a>createArchitectureView</h5>
<div class="paragraph">
<p>Creates a new architecture view in the given <code>DependencyGraph</code>.
The result is a <code>DependencyGraph</code> which is a filtered version of the incoming <code>sourceGraph</code>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>sourceGraph</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>the graph from which we create the new architecture view.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>architecture</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>the <code>Architecture</code> which defines the view.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>tag</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The tag to write on every node on the given sourceGraph and on each parent architecture node.
This parameter is optional: It defaults to the architecture name.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Result</dt>
<dd>
<p>A filtered graph which contains all nodes which belong to this new architecture.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_createpackagearchitectureview"><a class="anchor" href="#_createpackagearchitectureview"></a>createPackageArchitectureView</h5>
<div class="paragraph">
<p>Uses the package structure to create a new <code>Architecture</code> based on the package names.</p>
</div>
<div class="paragraph">
<p>That package architecture is available to the Analysis script under the name <code>Package</code>, i.e. by
using <code>architecture("Package")</code>.</p>
</div>
<div class="paragraph">
<p>If the parameter <code>maxDepth</code> is given and greater than 0, the package names will have <code>maxDepth</code>
levels at most; the name of the architecture is <code>Package-n</code> with n being <code>maxDepth</code>.</p>
</div>
<div class="paragraph">
<p>Then, this command uses <code>createArchitectureView</code> to create the architecture view, and returns the
filtered graph.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>graph</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>the <code>DependencyGraph</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>maxDepth</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>the maximum depth of the package names. Defaults to <code>0</code>, i.e. unlimited.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Result</dt>
<dd>
<p>A filtered graph which contains all nodes which belong to this new architecture.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_createpackagearchitectureview_2"><a class="anchor" href="#_createpackagearchitectureview_2"></a>createPackageArchitectureView</h5>
<div class="paragraph">
<p>Create a new <code>Architecture</code> based on the item names.
The parameter <code>separator</code> defines how to split the names.</p>
</div>
<div class="paragraph">
<p>That architecture is available to the Analysis script under the given name, i.e. by using e.g. <code>architecture("Package")</code>.</p>
</div>
<div class="paragraph">
<p>If the parameter <code>maxDepth</code> is given and greater than 0, the names will have <code>maxDepth</code> levels at
most; the name of the architecture is <code>Name-n</code> with n being <code>maxDepth</code>.</p>
</div>
<div class="paragraph">
<p>Then, this command uses <code>createArchitectureView</code> to create the architecture view, and returns the
filtered graph.</p>
</div>
<div class="paragraph">
<p>This command is useful to create an Architecture View e.g. based on the Package names of the classes.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>graph</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>the <code>DependencyGraph</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>architectureName</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>the name of the architecture.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>separator</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>the String to split and join the names again.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>maxDepth</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>the maximum depth of the package names. Defaults to <code>0</code>, i.e. unlimited.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Result</dt>
<dd>
<p>A filtered graph which contains all nodes which belong to this new architecture.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_mapdependencies"><a class="anchor" href="#_mapdependencies"></a>mapDependencies</h5>
<div class="paragraph">
<p>Maps all dependencies in the given <code>DependencyGraph</code> one level "up" in the given <code>Architecture</code>,
and returns the given graph, filtered so that it only contains the architecture nodes, but not the base nodes.</p>
</div>
<div class="paragraph">
<p>So this command helps to reduce a given <code>DependencyGraph</code>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>dependencyGraph</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>the <code>DependencyGraph</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>architecture</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>the <code>Architecture</code></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Result</dt>
<dd>
<p>The result is a <code>DependencyGraph</code> representing the given Architecture; the graph contains the
dependencies on its lowest level, i.e. on the leaves of the architecture tree.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_readarchitecture"><a class="anchor" href="#_readarchitecture"></a>readArchitecture</h5>
<div class="paragraph">
<p>Reads an <code>Architecture</code> from the given file name and registers it under the name defined in the file.
The architecture is then available using the <code>architecture(&lt;name&gt;)</code> command.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>filename</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The filename. It can refer to a file in the file system or in the classpath, using the
prefix <code>classpath://</code>.</p>
</div>
<div class="paragraph">
<p>If there the path is relative, then QAvalidator also searches for the architecture DSL file
in the same place as the analysis DSL file. This is useful if the analysis file and the
architecture file live in the same source tree.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_manipulation"><a class="anchor" href="#_manipulation"></a>3.5. Manipulation</h3>
<div class="sect3">
<h4 id="_graphfilterqavplugin"><a class="anchor" href="#_graphfilterqavplugin"></a>3.5.1. GraphFilterQavPlugin</h4>
<div class="paragraph">
<p>A graph can be filtered according to properties on the nodes or on the dependencies.
Filtered graphs can then be used for further analysis (see <a href="#qav-analysis-dsl-validation">Validation</a>),
or they can be exported for visualization (see <a href="#qav-analysis-dsl-export">Export and Visualization</a>).</p>
</div>
<div class="paragraph">
<p>The GraphFilterQavPlugin offers are a number of filters on nodes and on edges.
Filters can be combined in the expected ways, using combinations with <code>and</code> and <code>or</code>, and negation with <code>not</code>.</p>
</div>
<div class="sect4">
<h5 id="_addfilter"><a class="anchor" href="#_addfilter"></a>addFilter</h5>
<div class="paragraph">
<p>Registers a new filter under the given name.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>name</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>the name</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>filter</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>the filter</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Result</dt>
<dd>
<p>Returns the filter.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_and"><a class="anchor" href="#_and"></a>and</h5>
<div class="paragraph">
<p>Creates a new <code>AndFilter</code>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>filters&#8230;&#8203;</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The filters to combine with AND</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Result</dt>
<dd>
<p>A new <code>AndFilter</code></p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_dependencypropertyexistsfilter"><a class="anchor" href="#_dependencypropertyexistsfilter"></a>dependencyPropertyExistsFilter</h5>
<div class="paragraph">
<p>Creates a new <code>DependencyPropertyExistsFilter</code> to filter which <em>dependencies</em> to keep.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>propertyName</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The property name which must be set on the dependency. The value does not matter.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Result</dt>
<dd>
<p>The new <code>DependencyPropertyExistsFilter</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_dependencypropertyinfilter"><a class="anchor" href="#_dependencypropertyinfilter"></a>dependencyPropertyInFilter</h5>
<div class="paragraph">
<p>Creates a new <code>DependencyPropertyInFilter</code> to filter which <em>dependencies</em> to keep.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>propertyName</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The property name</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>value</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The value that must be there to accept the edge.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Result</dt>
<dd>
<p>The new <code>DependencyPropertyInFilter</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_dependencytofilter"><a class="anchor" href="#_dependencytofilter"></a>dependencyToFilter</h5>
<div class="paragraph">
<p>Creates a new <code>DependencyToFilter</code>.
Accepts all edges which have target nodes accepted by the given base filter.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>baseFilter</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>the node filter for target nodes</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Result</dt>
<dd>
<p>The new <code>DependencyToFilter</code></p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_dependencytypeedgeoutfilter"><a class="anchor" href="#_dependencytypeedgeoutfilter"></a>dependencyTypeEdgeOutFilter</h5>
<div class="paragraph">
<p>Creates a new <code>DependencyTypeEdgeOutFilter</code> to filter out <em>dependencies</em>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>dependencyTypeNames&#8230;&#8203;</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The dependency type names to filter out.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Result</dt>
<dd>
<p>The new <code>DependencyTypeEdgeOutFilter</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_dependencytypeedgeoutfilter_2"><a class="anchor" href="#_dependencytypeedgeoutfilter_2"></a>dependencyTypeEdgeOutFilter</h5>
<div class="paragraph">
<p>Creates a new <code>DependencyTypeEdgeOutFilter</code> to filter out <em>dependencies</em>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>dependencyTypes&#8230;&#8203;</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The dependency types to filter out.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Result</dt>
<dd>
<p>The new <code>DependencyTypeEdgeOutFilter</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_filter"><a class="anchor" href="#_filter"></a>filter</h5>
<div class="paragraph">
<p>Returns the filter with the given name.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>name</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>the name</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Result</dt>
<dd>
<p>The filter registered under that name, or null if no such filter is available.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_nodehasdependencytofilter"><a class="anchor" href="#_nodehasdependencytofilter"></a>nodeHasDependencyToFilter</h5>
<div class="paragraph">
<p>Creates a new <code>NodeHasDependencyToFilter</code>. Accepts all nodes which have outgoing dependencies to
nodes which are accepted by the given base filter.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>graph</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>the graph to work on</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>baseFilter</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>the node filter</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Result</dt>
<dd>
<p>the new <code>NodeHasDependencyToFilter</code></p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_nodehasincomingdependencytypefilter"><a class="anchor" href="#_nodehasincomingdependencytypefilter"></a>nodeHasIncomingDependencyTypeFilter</h5>
<div class="paragraph">
<p>Creates a new <code>NodeHasIncomingDependencyTypeFilter</code>. This is an <em>IN</em> filter.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>dependencyTypeName</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The dependency type name to accept in the filter.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Result</dt>
<dd>
<p>The new <code>NodeHasIncomingDependencyTypeFilter</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_nodehasincomingdependencytypefilter_2"><a class="anchor" href="#_nodehasincomingdependencytypefilter_2"></a>nodeHasIncomingDependencyTypeFilter</h5>
<div class="paragraph">
<p>Creates a new <code>NodeHasIncomingDependencyTypeFilter</code>. This is an <em>IN</em> filter.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>dependencyType</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The dependency type to accept in the filter.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Result</dt>
<dd>
<p>The new <code>NodeHasIncomingDependencyTypeFilter</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_nodehasoutgoingdependencytypefilter"><a class="anchor" href="#_nodehasoutgoingdependencytypefilter"></a>nodeHasOutgoingDependencyTypeFilter</h5>
<div class="paragraph">
<p>Creates a new <code>NodeHasOutgoingDependencyTypeFilter</code>. This is an <em>IN</em> filter.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>dependencyTypeName</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The dependency type name to accept in the filter.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Result</dt>
<dd>
<p>The new <code>NodeHasOutgoingDependencyTypeFilter</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_nodehasoutgoingdependencytypefilter_2"><a class="anchor" href="#_nodehasoutgoingdependencytypefilter_2"></a>nodeHasOutgoingDependencyTypeFilter</h5>
<div class="paragraph">
<p>Creates a new <code>NodeHasOutgoingDependencyTypeFilter</code>. This is an <em>IN</em> filter.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>dependencyType</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The dependency type to accept in the filter.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Result</dt>
<dd>
<p>The new <code>NodeHasOutgoingDependencyTypeFilter</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_nodenameinfilter"><a class="anchor" href="#_nodenameinfilter"></a>nodeNameInFilter</h5>
<div class="paragraph">
<p>Creates a new <code>NodeNameInFilter</code>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>patterns&#8230;&#8203;</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The patterns (Ant path style) to accept.
If any of the given patterns matches the name, the node is accepted.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Result</dt>
<dd>
<p>The new <code>NodeNameInFilter</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_nodenameoutfilter"><a class="anchor" href="#_nodenameoutfilter"></a>nodeNameOutFilter</h5>
<div class="paragraph">
<p>Creates a new <code>NodeNameOutFilter</code>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>patterns&#8230;&#8203;</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The patterns (Ant path style) to filter out.
Only if none of the given patterns matches the name, the node is accepted.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Result</dt>
<dd>
<p>The new <code>NodeNameOutFilter</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_nodepropertyexistsfilter"><a class="anchor" href="#_nodepropertyexistsfilter"></a>nodePropertyExistsFilter</h5>
<div class="paragraph">
<p>Creates a new <code>NodePropertyExistsFilter</code>. This is an <em>IN</em> filter.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>propertyName</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The name of the property which must exist to accept the node.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Result</dt>
<dd>
<p>The new <code>NodePropertyExistsFilter</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_nodepropertyinfilter"><a class="anchor" href="#_nodepropertyinfilter"></a>nodePropertyInFilter</h5>
<div class="paragraph">
<p>Creates a new <code>NodePropertyInFilter</code>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>propertyName</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The property name</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>value</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The value that must match to accept the node.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Result</dt>
<dd>
<p>The new <code>NodePropertyInFilter</code>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_not"><a class="anchor" href="#_not"></a>not</h5>
<div class="paragraph">
<p>Creates a new <code>NotFilter</code>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>filter</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The filter to negate</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Result</dt>
<dd>
<p>A new <code>NotFilter</code></p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_or"><a class="anchor" href="#_or"></a>or</h5>
<div class="paragraph">
<p>Creates a new <code>OrFilter</code>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>filters&#8230;&#8203;</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The filters to combine with OR</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Result</dt>
<dd>
<p>A new <code>OrFilter</code></p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="qav-analysis-dsl-validation"><a class="anchor" href="#qav-analysis-dsl-validation"></a>3.6. Validation</h3>
<div class="sect3">
<h4 id="_analysisqavplugin"><a class="anchor" href="#_analysisqavplugin"></a>3.6.1. AnalysisQavPlugin</h4>
<div class="paragraph">
<p>QAvalidator&#8217;s main mission is to validate source code against intended architecture concepts.
If a validation fails, QAvalidator can either issue a warning, or it can fail the build.</p>
</div>
<div class="sect4">
<h5 id="_checkarchitecturerules"><a class="anchor" href="#_checkarchitecturerules"></a>checkArchitectureRules</h5>
<div class="paragraph">
<p>Validate against a specific architecture.
Checks the given graph according to the given architecture. It checks these rules:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Checks that all edges are allowed, i.e. that for each edge there is at least one rule which
justifies the existence of that edge</p>
</li>
<li>
<p>Checks that all components are actually implemented. I.e. we don&#8217;t want to have components which
are defined on the architecture level, but don&#8217;t have corresponding classes in the code base.</p>
</li>
<li>
<p>Checks that all rules which are explicitly defined are used in the code base.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For each rule which is not fulfilled, the command issues an error and writes a line into the
SonarQube error file for the SonarQube analysis.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>architectureGraph</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>the graph where we want to find rule violations</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>architecture</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Architecture to check against</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_checkdependencyrules"><a class="anchor" href="#_checkdependencyrules"></a>checkDependencyRules</h5>
<div class="paragraph">
<p>Validate against a specific architecture.
Checks the given graph according to the given architecture. It checks this rule:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Checks that all edges are allowed, i.e. that for each edge there is at least one rule which
justifies the existence of that edge.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If the rule is not fulfilled, the command issues an error and writes a line into the SonarQube error
file for the SonarQube analysis.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>architectureGraph</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>the graph where we want to find rule violations</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>architecture</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Architecture to check against</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_findcycles"><a class="anchor" href="#_findcycles"></a>findCycles</h5>
<div class="paragraph">
<p>Checks the input graph for cycles.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>graph</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>the DependencyGraph to find the cycles in</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>scope</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>name of the scope, used for error messages</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>filterContains</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>if <code>true</code>, filters out all dependencies of type CONTAINS.
In most cases, it does not make sense to include these dependencies in the search for cycles.
Defaults to <code>true</code>. So if they really should be included, set this to false explicitly.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Result</dt>
<dd>
<p>The given graph, filtered to only those nodes which are part of a cycle.
I.e., if the resulting graph is empty, then the original graph is free of cycles.
If it is not free of cycles, QAvalidator issues a violation and marks the analysis step as <em>failed</em>.</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_finddependenciesto"><a class="anchor" href="#_finddependenciesto"></a>findDependenciesTo</h5>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This is an incubating feature, introduced in 1.2.7. It may change without further notice.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Finds all nodes which have outgoing dependencies to nodes which match one of the given patterns.
If it finds any, it reports a violation.</p>
</div>
<div class="paragraph">
<p>Returns a filtered graph which contains only the nodes specified by the patterns and those with
dependencies to them.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>graph</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>the DependencyGraph to analyze</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>patterns</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>list of target name patterns</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Result</dt>
<dd>
<p>a filtered graph which contains only the nodes specified by the patterns and those with dependencies to them.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="qav-analysis-dsl-export"><a class="anchor" href="#qav-analysis-dsl-export"></a>3.7. Export and Visualization</h3>
<div class="sect3">
<h4 id="_ioqavplugin"><a class="anchor" href="#_ioqavplugin"></a>3.7.1. IOQavPlugin</h4>
<div class="paragraph">
<p>QAvalidator language elements for Input/Output, reading and writing JSON, DOT, or text-format Node infos</p>
</div>
<div class="sect4">
<h5 id="_abbreviation"><a class="anchor" href="#_abbreviation"></a>abbreviation</h5>
<div class="paragraph">
<p>Registers a new abbreviation which will be used for DOT exports.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>longName</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>the long name to abbreviate</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>shortName</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>the abbreviation</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_outputdir"><a class="anchor" href="#_outputdir"></a>outputDir</h5>
<div class="paragraph">
<p>Sets the output directory. If the "clean" flag is set to true, deletes the directory (and its
content) and then re-creates it.</p>
</div>
<div class="paragraph">
<p>Throws an <code>IllegalArgumentException</code> if there exists a <em>file</em> (not a directory) with the
given name, or if the directory can&#8217;t be created (as indicated by an IOException).</p>
</div>
<div class="paragraph">
<p>Note that QAvalidator only allows to set the <code>outputDir</code> <strong>once</strong>. This is helpful if the analysis
DSL file defines an output directory, but the command line or the Maven pom overrides that
directory.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>path</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>the path</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>clean</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>if true, deletes the directory completely before creating it. Defaults to <code>false</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_printnodes"><a class="anchor" href="#_printnodes"></a>printNodes</h5>
<div class="paragraph">
<p>Prints the given node of the given graph into a file.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Use filters to print only the relevant nodes and edges.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>dependencyGraph</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The graph in which the nodes lie.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>filename</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>The filename; it is relative to the <code>outputDir</code> defined via the <code>outputDir</code> command or
in the Maven/Gradle config (explicitly or by default), or on the command line.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>printIfEmpty</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>if <code>true</code>, prints the (empty) file even if there are no nodes in the graph;
if <code>false</code>, only prints the file if the graph actually contains nodes. Defaults to <code>true</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_readfile"><a class="anchor" href="#_readfile"></a>readFile</h5>
<div class="paragraph">
<p>Read the graph from the given file.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>filename</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>the filename</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Result</dt>
<dd>
<p>the new graph</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_readfile_2"><a class="anchor" href="#_readfile_2"></a>readFile</h5>
<div class="paragraph">
<p>Read the graph from the given file, and merges it into the given graph.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>parameters</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Accepts a map with a <code>baseDir</code> and <code>includes</code> and <code>excludes</code> patterns which work in Ant-style;
this defines where it recursively searches all dependencyGraph JSON files.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Result</dt>
<dd>
<p>the new graph</p>
</dd>
</dl>
</div>
</div>
<div class="sect4">
<h5 id="_writedot"><a class="anchor" href="#_writedot"></a>writeDot</h5>
<div class="paragraph">
<p>Writes the given graph to a DOT (GraphViz) file with the given filename in the directory
defined as outputDir.</p>
</div>
<div class="paragraph">
<p>Then calls dot (GraphViz) to create .png and .svng files from it.
Also writes a GraphML file with the same base filename, to be used with yEd.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Install GraphViz to allow for .png and .svg creation.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>dependencyGraph</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>the graph</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>filename</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>the filename</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>architecture</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>the <code>Architecture</code> to use to show the hierarchy of the nodes.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>createEdgeLabels</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p><code>true</code> to print edge labels, <code>false</code> to omit them.</p>
</div>
<div class="paragraph">
<p>The edge labels give the the number of base relations (at the middle of an edge),
the number of different base relation sources (at the start of an edge),
and the number of different base relation targets (ad the end of an edge).</p>
</div>
<div class="paragraph">
<p>This parameter is optional. It defaults to <code>true</code>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_writefile"><a class="anchor" href="#_writefile"></a>writeFile</h5>
<div class="paragraph">
<p>Writes the given graph to a file with the given filename in the directory defined as outputDir.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>dependencyGraph</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>the graph</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>filename</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>the filename</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_writegraphlegend"><a class="anchor" href="#_writegraphlegend"></a>writeGraphLegend</h5>
<div class="paragraph">
<p>Writes the graph legend with the given filename base in the directory defined as outputDir.
Then calls dot (GraphViz) to create a .png file from it.
Also writes a GraphML file with the same base filename, to be used with yEd.</p>
</div>
<div class="paragraph">
<p>This is useful to see the color code for the dependency types.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>filenameBase</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>the filename base, relative to outputDir; defaults to <code>legend</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_writeneo4j"><a class="anchor" href="#_writeneo4j"></a>writeNeo4j</h5>
<div class="paragraph">
<p>Exports the given graph to a Neo4j DB. This database is accessed using the BOLT protocol; i.e. the
Neo4j server must be running and must be accessible. The URI and credentials must be provided in the
environment variables <code>NEO4J_URI</code>, <code>NEO4J_USERNAME</code>, <code>NEO4J_PASSWORD</code>.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>dependencyGraph</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>the graph to export</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>clearAll</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>if true, delete all nodes in the DB. Defaults to false</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_sonarqube_and_monitoring_the_quality_contract"><a class="anchor" href="#_sonarqube_and_monitoring_the_quality_contract"></a>3.8. SonarQube and Monitoring the Quality Contract</h3>
<div class="sect3">
<h4 id="_sonarmessagesqavplugin"><a class="anchor" href="#_sonarmessagesqavplugin"></a>3.8.1. SonarMessagesQavPlugin</h4>
<div class="paragraph">
<p>QAvalidator may be used as part of a SonarQube analysis  (see <a href="#SonarQube">[SonarQube]</a>).
It writes a log file for SonarQube; each architecture violation is written on one line.
A SonarQube Plugin can read that file and report the number of violation as part of the SonarQube
Quality Contract.
The file is located in the directory defined as <code>outputDir</code> (via command line, or in the Maven POM,
or in the analysis file).</p>
</div>
<div class="sect4">
<h5 id="_sonarerror"><a class="anchor" href="#_sonarerror"></a>sonarError</h5>
<div class="paragraph">
<p>writes the given message as Sonar Error.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>msg</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>the message</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_sonarwarn"><a class="anchor" href="#_sonarwarn"></a>sonarWarn</h5>
<div class="paragraph">
<p>writes the given message as Sonar Warning.</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>msg</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>the message</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_typical_analysis_steps"><a class="anchor" href="#_typical_analysis_steps"></a>3.9. Typical Analysis Steps</h3>
<div class="sect3">
<h4 id="_shortcutqavplugin"><a class="anchor" href="#_shortcutqavplugin"></a>3.9.1. ShortcutQavPlugin</h4>
<div class="paragraph">
<p>The plugin <code>ShortcutQavPlugin</code> combines the most common preparations, and registers all of the above listed plugins.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It registers other plugins (<code>apply</code>)</p>
</li>
<li>
<p>It define filters: ignoreUtils, classes, modules, inputScope, mavenScope, cycleFilter</p>
</li>
<li>
<p>It defines filtered Graphs:</p>
<div class="ulist">
<ul>
<li>
<p>allClassesGraph: all nodes in <code>context.dependencyGraph</code> which represent a class, i.e. it filters all nodes:</p>
<div class="ulist">
<ul>
<li>
<p>Property "type" has value "class": it filters out all nodes which represent "component" instead of "class".</p>
</li>
<li>
<p>Property "name" not in <code>"java.lang.xxx"</code>, <code>"java.util.xxx"</code>, <code>"java.io.xxx"</code>, <code>"org.slf4j.xxx"</code>: No util classes.</p>
</li>
</ul>
</div>
</li>
<li>
<p>inputClassesGraph: all of <code>allClassesGraph</code>, but also:</p>
<div class="ulist">
<ul>
<li>
<p>Property "scope" has value "input": Only the classes in the input scope, filter out all referenced classes
which are not part of the input scope</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="qav-analysis-dsl-fail-build"><a class="anchor" href="#qav-analysis-dsl-fail-build"></a>3.10. Failing the Build</h3>
<div class="paragraph">
<p>If QAvalidator is used via the Maven plugin, it can be configured to break the build if validations fail, or if serious
errors occur.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Technically speaking, this is the case when an Exception is thrown.
This happens for</p>
</div>
<div class="ulist">
<ul>
<li>
<p>detected violations, signalled using the <code>violation</code> keyword.</p>
</li>
<li>
<p>failed validations like failing <code>assert</code> statements in the analysis DSL file,</p>
</li>
<li>
<p>I/O errors, or</p>
</li>
<li>
<p>other internal errors, like NPEs etc.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="qav-ui"><a class="anchor" href="#qav-ui"></a>4. UI</h2>
<div class="sectionbody">
<div class="paragraph">
<p>QAvalidator offers a web UI to browse a dependency graph.</p>
</div>
<div class="sect2">
<h3 id="_start_the_web_ui"><a class="anchor" href="#_start_the_web_ui"></a>4.1. Start the Web UI</h3>
<div class="sect3">
<h4 id="_start_via_command_line"><a class="anchor" href="#_start_via_command_line"></a>4.1.1. Start via Command Line</h4>
<div class="paragraph">
<p>Start the server from the command line. It needs the graph file as parameter (mandatory).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ java -jar qav-app-&lt;version&gt;.jar --graph=path/to/dependencyGraph.json \
                                 [--server.port=8080]</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, the server will start on port 8080. With <code>--server.port=xx</code>, another port can be assigned.</p>
</div>
</div>
<div class="sect3">
<h4 id="_start_via_maven_plugin"><a class="anchor" href="#_start_via_maven_plugin"></a>4.1.2. Start via Maven Plugin</h4>
<div class="paragraph">
<p>Alternatively, start it via the Maven build. Add another <code>execution</code> block to the plugin configuration. The configuration block accepts two more parameters, <code>graph</code> for the graph file to read, and <code>port</code> for the server port to use. The example shows the default values.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">    <span class="tag">&lt;executions&gt;</span>
        <span class="tag">&lt;execution&gt;</span>
            <span class="tag">&lt;id&gt;</span>server<span class="tag">&lt;/id&gt;</span>
            <span class="tag">&lt;goals&gt;</span>
                <span class="tag">&lt;goal&gt;</span>server<span class="tag">&lt;/goal&gt;</span>
            <span class="tag">&lt;/goals&gt;</span>
        <span class="tag">&lt;/execution&gt;</span>
    <span class="tag">&lt;/executions&gt;</span>
    <span class="tag">&lt;configuration&gt;</span>
        <span class="tag">&lt;graph&gt;</span>target/qav-report/dependencyGraph.json<span class="tag">&lt;/graph&gt;</span>
        <span class="tag">&lt;port&gt;</span>8080<span class="tag">&lt;/port&gt;</span>
    <span class="tag">&lt;/configuration&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, define the properties on the command line; then no specific configuration is required in the <code>pom.xml</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>mvn qav:server -Dserver.port=8080 -Dserver.graph=target/qav-report/dependencyGraph.json</pre>
</div>
</div>
<div class="paragraph">
<p>The QAvalidator Server will read the <code>dependencyGraph.json</code> file, index it with an in-memory Lucene index to allow for a flexible search, and offer a plain web UI to browse the graph.</p>
</div>
<div class="paragraph">
<p>Stop the server with <code>Ctrl-C</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_start_via_gradle_plugin"><a class="anchor" href="#_start_via_gradle_plugin"></a>4.1.3. Start via Gradle Plugin</h4>
<div class="paragraph">
<p>You can start the Server via the Gradle plugin.
The configuration accepts two more parameters; the example shows the default values.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">    qavalidator {
        port = <span class="string"><span class="delimiter">'</span><span class="content">8080</span><span class="delimiter">'</span></span>
        graph = <span class="string"><span class="delimiter">'</span><span class="content">build/qav-report/dependencyGraph.json</span><span class="delimiter">'</span></span>
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Start the server with this command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>./gradlew qavalidatorServer</pre>
</div>
</div>
<div class="paragraph">
<p>and stop it with <code>Ctrl-C</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_search"><a class="anchor" href="#_search"></a>4.2. Search</h3>
<div class="paragraph">
<p>The main page shows a search dialog.</p>
</div>
<div class="paragraph">
<p>If no query is entered, it lists all nodes.</p>
</div>
<div class="paragraph">
<p>A query uses the Lucene query syntax. To find a node with name "de.qaware.qav", the search query is:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>name:de.qaware.qav</pre>
</div>
</div>
<div class="paragraph">
<p>The result will be the node with the name "de.qaware.qav".</p>
</div>
<div class="paragraph">
<p>To find all nodes starting with "de.qaware.qav", the search query is:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>name:de.qaware.qav*</pre>
</div>
</div>
<div class="paragraph">
<p>The result will be a list of nodes.</p>
</div>
<div class="paragraph">
<p>If searching for a name, the prefix <code>name:</code> may be omitted. I.e. searching for <code>de.qaware.qav*</code> will yield the same results.</p>
</div>
<div class="paragraph">
<p>To find all nodes which are architecture nodes (i.e. not class-level nodes), the query is:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>type:architecture</pre>
</div>
</div>
<div class="paragraph">
<p>To find all nodes which belong to the input scope (i.e. were read initially, as opposed to classes which are referenced by classes in the input scope):</p>
</div>
<div class="literalblock">
<div class="content">
<pre>scope:input</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_node_detail_view"><a class="anchor" href="#_the_node_detail_view"></a>4.3. The node detail view</h3>
<div class="paragraph">
<p>Selecting a class navigates to the node detail view.</p>
</div>
<div class="paragraph">
<p>It shows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Node properties</p>
</li>
<li>
<p>The hierarchy: this is "vertical navigation" in the graph</p>
</li>
<li>
<p>Incomonig and outgoing dependencies: this is "horizontal navigation in the graph.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Clicking on a node navigates to that node&#8217;s detail views.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_dependency_detail_view"><a class="anchor" href="#_the_dependency_detail_view"></a>4.4. The dependency detail view</h3>
<div class="paragraph">
<p>Clicking on the dependency type in the incomonig and outgoing dependencies part
navigates to the dependency detail view.</p>
</div>
<div class="paragraph">
<p>It shows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Source, target, and type: for better overview and easy navigation to the source and target nodes.</p>
</li>
<li>
<p>Edge properties. One property, if available, is <code>lineNo</code>; it tells the line number in the source file where the class of the target node is referenced.</p>
</li>
<li>
<p>Base dependencies, if applicable: For dependencies on architecture level, the underlying dependencies (the base dependencies) are shown. Again, the "Source" and "Target" nodes are links to their node detail pages, whereas the "Dependency Type" is a link to the edge detail page.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_developer_documentation"><a class="anchor" href="#_developer_documentation"></a>5. Developer Documentation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is the documentation for version 1.2.9.</p>
</div>
<div class="paragraph">
<p>The intended audience of this chapter are developers who want to enhance or contribute to QAvalidator.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#qav-dev-core-ideas">Core ideas</a></p>
</li>
<li>
<p><a href="#qav-dev-project-structure">Project Structure</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="qav-dev-core-ideas"><a class="anchor" href="#qav-dev-core-ideas"></a>5.1. QAvalidator Core Ideas</h3>
<div class="ulist">
<ul>
<li>
<p>The analysis is defined in the QAvalidator Analysis DSL.</p>
</li>
<li>
<p>Architecture definitions are defined using the QAvalidator Architecture DSL.</p>
</li>
<li>
<p>The QAvalidator Core is more like an executer framework for analysis steps.</p>
<div class="ulist">
<ul>
<li>
<p>Analysis is done in plugins. QAvalidator comes with a number of plugins. New plugins can be easily defined. So if there is functionality missing, it&#8217;s often a good idea to write a new plugin.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_dependencygraph"><a class="anchor" href="#_dependencygraph"></a>5.1.1. DependencyGraph</h4>
<div class="paragraph">
<p>To understand the QAvalidator code, the most important data structure is the <code>DependencyGraph</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The input scope is read and put into the <code>DependencyGraph</code>.</p>
</li>
<li>
<p>Any architecture view is a tree. It is put into the same <code>DependencyGraph</code> as the input scope. The nodes are differentiated by the <code>type</code> attribute.</p>
</li>
<li>
<p>This graph can be filtered by attributes on the nodes or on the edges.</p>
</li>
<li>
<p>A graph (the original or a filtered graph) can be used for further analysis steps, or it can be e.g. exported to a <code>*.dot</code> or <code>*.graphml</code> file, or to our own <code>*.json</code> format. It can be analyzed, e.g. it can be checked for cycles.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_defining_the_analysis_dsl_and_running_an_analysis"><a class="anchor" href="#_defining_the_analysis_dsl_and_running_an_analysis"></a>5.1.2. Defining the Analysis DSL and Running an Analysis</h4>
<div class="paragraph">
<p>The class <code>QavAnalysisDSL</code> is the base class for analysis DSL scripts. I.e. this class defines the vocabulary of the analysis DSL. It does so in two ways: Methods defined in this class are available to every analysis DSL script. And it allows to register plugins, which can add more methods and dynamically enhance the analysis DSL.</p>
</div>
<div class="paragraph">
<p>The <code>QavAnalysisReader</code> reads a QAvalidator Analysis DSL file, and triggers the analysis.
The <code>QavAnalysisRunner</code> runs all analysis steps.</p>
</div>
</div>
<div class="sect3">
<h4 id="_defining_the_architecture_dsl"><a class="anchor" href="#_defining_the_architecture_dsl"></a>5.1.3. Defining the Architecture DSL</h4>
<div class="paragraph">
<p>The QAvalidator Architecture DSL is defined in the class <code>ArchitectureDSL</code>.
The mechanism is simpler than for the analysis DSL, since this DSL can&#8217;t be dynamically enhanced.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="qav-dev-project-structure"><a class="anchor" href="#qav-dev-project-structure"></a>5.2. Project Structure</h3>
<div class="paragraph">
<p>The project is organized as shown in the next figure.</p>
</div>
<div id="fig-qav-modules" class="imageblock">
<div class="content">
<img src="./img/qav-modules.svg" alt="qav modules">
</div>
<div class="title">Figure 3. QAvalidator Modules</div>
</div>
<div class="paragraph">
<p>From bottom to top, these are the modules:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Utilities:</p>
<div class="ulist">
<ul>
<li>
<p><em>qav-doc-generator</em>: Generates the QAvalidator Analysis DSL documentation; this is done using annotation processing at compile time.</p>
</li>
<li>
<p><em>qav-util</em>: Code that is used both by most parts of QAvalidator; utilities to work with strings or files etc.</p>
</li>
<li>
<p><em>qav-test-util</em>: Little helpers that are only used for testing.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Documentation:</p>
<div class="ulist">
<ul>
<li>
<p><em>qav-doc</em>: This documentation.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Main Model:</p>
<div class="ulist">
<ul>
<li>
<p><em>qav-graph</em>: This module contains the <code>DependencyGraph</code>, which is the core data model that QAvalidator works with.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Processing:</p>
<div class="ulist">
<ul>
<li>
<p>Input:</p>
<div class="ulist">
<ul>
<li>
<p><em>qav-input-java</em>: reads Java <code>.class</code> files and <code>.jar</code> files.</p>
</li>
<li>
<p><em>qav-input-maven</em>: reads <code>pom.xml</code> files.</p>
</li>
<li>
<p><em>qav-input-typescript</em>: reads input produced by the TypeScript analyzer (work in progress).</p>
</li>
<li>
<p><em>qav-input-gradle</em>: reads gradle project structure <em>(planned)</em>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Transformation &amp; Validation:</p>
<div class="ulist">
<ul>
<li>
<p><em>qav-architecture-dsl</em>: This is the data model for representing an <code>Architecture</code>. Also contains the DSL to read an architecture definition from a QAvalidator Architecture DSL file.</p>
</li>
<li>
<p><em>qav-architecture</em>: Contains factories, validators, and transformations to work with architectures, architecture components, and architecture sub-graphs.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Output:</p>
<div class="ulist">
<ul>
<li>
<p><em>qav-visualization</em>: Exporters to <code>.dot</code> (for GraphViz) and to <code>.graphml</code> (for yEd).</p>
</li>
</ul>
</div>
</li>
<li>
<p>Analysis: DSL &amp; Orchestration:</p>
<div class="ulist">
<ul>
<li>
<p><em>qav-analysis-dsl</em>: This is the DSL to define analysis runs, and to compose analysis steps.</p>
</li>
<li>
<p><em>qav-analysis-plugins</em>: Contains the plugins which define language constructs of the QAvalidator Analysis DSL.</p>
</li>
<li>
<p>The former is the technical framework to set up the DSL, and the latter is the actual commands; they use the steps provided in input, transformation &amp; validation, and output.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Runners:</p>
<div class="ulist">
<ul>
<li>
<p><em>qav-runner</em>: provides an API to start analysis runs. I.e. it combines everything so that the following runner options are small and easy to implement.</p>
</li>
<li>
<p><em>qav-gradle-plugin</em>: start QAvalidator from a Gradle run.</p>
</li>
<li>
<p><em>qav-maven-plugin</em>: start QAvalidator from a Maven run.</p>
</li>
<li>
<p><em>qav-app</em>: start QAvalidator standalone, from command line.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Result Reading:</p>
<div class="ulist">
<ul>
<li>
<p><em>qav-server</em>: A web application server to view graphs.</p>
</li>
<li>
<p><em>qav-sonar-plugin</em>: The SonarQube plugin which reads <code>qav-sonar.log</code> files and offers the results as metrics.</p>
</li>
<li>
<p><em>qav-ui</em>: The Angular-2 web app, served via <em>qav-server</em>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release-notes"><a class="anchor" href="#release-notes"></a>6. Release Notes</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_release_1_2_9_16_01_2019"><a class="anchor" href="#_release_1_2_9_16_01_2019"></a>6.1. Release 1.2.9&#8201;&#8212;&#8201;(16.01.2019)</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Breaking Changes</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>removed deprecated commands:</p>
<div class="ulist">
<ul>
<li>
<p><code>reportLeftOvers</code>: was deprecated in 1.2.0</p>
</li>
<li>
<p><code>printNodes</code>: removed variant which was deprecated in 1.2.0</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">New Features</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/qavalidator/qavalidator/issues/6">#6</a>: Read Zipkin traces (experimental! Things will change here!)</p>
</li>
<li>
<p><a href="https://github.com/qavalidator/qavalidator/issues/12">#12</a>: Export the DependencyGraph to Neo4j.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Changes</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Library upgrades, UI upgrade.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p><em>Release 1.2.8: Skipped.</em></p>
</div>
</div>
<div class="sect2">
<h3 id="_release_1_2_7_31_01_2018"><a class="anchor" href="#_release_1_2_7_31_01_2018"></a>6.2. Release 1.2.7&#8201;&#8212;&#8201;31.01.2018</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Breaking Changes</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>renamed some filters in <code>GraphFilterPlugin</code>, to have more consistent naming of the filter commands:</p>
<div class="ulist">
<ul>
<li>
<p>(old) <code>dependencyTypeNodeFilter</code> &#8594; (new) <code>nodeHasIncomingDependencyTypeFilter</code>.<br>
This filter&#8217;s scope is also reduced to <em>incoming</em> dependency types; use an <em>or</em> filter to combine it with outgoing dependencies, if required.</p>
</li>
<li>
<p>(old) <code>outgoingDependencyTypeFilter</code> &#8594; (new) <code>nodeHasOutgoingDependencyTypeFilter</code>. Only the name changed.</p>
</li>
<li>
<p>(old) <code>propertyExistsFilter</code> &#8594; (new) <code>nodePropertyExistsFilter</code>. Only the name changed.</p>
</li>
<li>
<p>(old) <code>propertyInFilter</code> &#8594; (new) <code>nodePropertyInFilter</code>. Only the name changed.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">New Features</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/qavalidator/qavalidator/issues/3">#3</a>: new command <code>writeGraphLegend</code> writes a legend (key) for the graphs exported with <code>writeDot</code>. This is useful to see the color code for the dependency types. Also change the colors of the arrows to a more coherent color set.</p>
</li>
<li>
<p><a href="https://github.com/qavalidator/qavalidator/issues/4">#4</a>: introduced new keyword in the Architecture DSL <code>usesImpl</code> to allow a dependency on an implementation part instead of an API. This is useful to model factories or Spring 4 configurations (or other exceptions from the rule, if there is a really good excuse).</p>
</li>
<li>
<p><a href="https://github.com/qavalidator/qavalidator/issues/5">#5</a>: introduced new command <code>findDependenciesTo</code>: Finds all nodes which have outgoing dependencies to nodes which match one of the given patterns. If it finds any, it reports a violation.</p>
</li>
<li>
<p>New filters:</p>
<div class="ulist">
<ul>
<li>
<p><code>dependencyToFilter</code>: Accepts all edges which have target nodes accepted by the given base filter.</p>
</li>
<li>
<p><code>nodeNameInFilter</code>: accepts all nodes which match one of the given patterns</p>
</li>
<li>
<p><code>nodeHasDependencyToFilter</code>: accepts all nodes which have outgoing dependencies to nodes accepted by the given base filter</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_release_1_2_6_04_11_2017"><a class="anchor" href="#_release_1_2_6_04_11_2017"></a>6.3. Release 1.2.6&#8201;&#8212;&#8201;04.11.2017</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Changes</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Changed the way to start the QAvalidator Server for the Web UI:</p>
<div class="ulist">
<ul>
<li>
<p>The server may be started via Maven Plugin or Gradle Plugin. Refer to chapter <a href="#qav-ui">UI</a> for details on the configuration.</p>
</li>
<li>
<p>The stand-alone app now also starts the server. So use <code>qav-app</code> instead of <code>qav-server</code>.</p>
</li>
<li>
<p>There is no standalone <code>qav-server</code> executable JAR file anymore.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Minor changes to the Maven plugin configuration. See the documentation for details.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_release_1_2_5_21_09_2017"><a class="anchor" href="#_release_1_2_5_21_09_2017"></a>6.4. Release 1.2.5&#8201;&#8212;&#8201;21.09.2017</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Breaking Changes</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/qaware/QAvalidator/issues/45">#45</a>: Re-implement the Maven Input Reader.
This changes the command <code>inputMaven</code> which now only takes one argument: the directory where to look for a <code>pom.xml</code> file.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Changes</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/qaware/QAvalidator/issues/44">#44</a>: Add Typescript input reader.
This reader reads an analysis export file from the Typescript analyzer.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_release_1_2_4_11_09_2017"><a class="anchor" href="#_release_1_2_4_11_09_2017"></a>6.5. Release 1.2.4&#8201;&#8212;&#8201;11.09.2017</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Changes</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Dependencies:</p>
<div class="ulist">
<ul>
<li>
<p>Set the minimum required SonarQube version to 5.6.3</p>
</li>
<li>
<p>Spring Boot: 1.4.2 &#8594; 1.5.6</p>
</li>
<li>
<p>Spring: 4.3.4 &#8594; 4.3.10</p>
</li>
<li>
<p>Spring Data: 1.12.5 &#8594; 1.13.6</p>
</li>
<li>
<p>Jackson: 2.8.7 &#8594; 2.8.9</p>
</li>
<li>
<p>Slf4j: 1.7.21 &#8594; 1.7.25</p>
</li>
<li>
<p>Logback: 1.1.7 &#8594; 1.1.11</p>
</li>
</ul>
</div>
</li>
<li>
<p>Refactoring: Split the code base into way more Gradle modules. See <a href="#qav-dev-project-structure">Project Structure</a> for an up-to-date description of the code structure.
There should not be any changes visible to QAvalidator users.</p>
</li>
<li>
<p>Release via Bintray to make QAvalidator publicly available.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Deprecations</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Analysis DSL:</p>
<div class="ulist">
<ul>
<li>
<p>The ShortcutQavPlugin moved from <code>de.qaware.qav.core.analysis.dsl.plugins.ShortcutQavPlugin</code> to <code>de.qaware.qav.analysis.plugins.ShortcutQavPlugin</code>.
Replace the <code>apply</code> statement in your analysis files accordingly.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Architecture DSL / class matching expressions:</p>
<div class="ulist">
<ul>
<li>
<p>If "*" is the last package names, it&#8217;s handled like "**".
This will be removed in one of the next releases, so change your Architecture definition and replace
   <code>my.prefix.*</code> by <code>my.prefix.**</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_release_1_2_3_25_07_2017"><a class="anchor" href="#_release_1_2_3_25_07_2017"></a>6.6. Release 1.2.3&#8201;&#8212;&#8201;25.07.2017</h3>
<div class="paragraph">
<p>First release which is published via Bintray.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Breaking Changes</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Change <code>NodeNameOutFilter</code> to accept Ant style path matcher instead of regular expressions. Note that this might be a breaking change.</p>
</li>
<li>
<p>There was a refactoring: if there are import statements like this in analysis files, then replace
<code>import de.qaware.qav.core.graph.api.DependencyType</code>
by
<code>import de.qaware.qav.graph.api.DependencyType</code></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Changes</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Fixed a bug; now dependencies to APIs (not only to components) can be declared as explained in the documentation.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_release_1_2_2_09_03_2017"><a class="anchor" href="#_release_1_2_2_09_03_2017"></a>6.7. Release 1.2.2&#8201;&#8212;&#8201;09.03.2017</h3>
<div class="ulist">
<ul>
<li>
<p>Fix Gradle plugin. There was a bug that it couldn&#8217;t find the architecture DSL base.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_release_1_2_1_06_03_2017"><a class="anchor" href="#_release_1_2_1_06_03_2017"></a>6.8. Release 1.2.1&#8201;&#8212;&#8201;06.03.2017</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Breaking changes</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><code>ignore</code>, <code>includes</code>, and <code>excludes</code> can only be defined on the level of the Architecture&#8201;&#8212;&#8201;not on any other component. This is a breaking change, but makes understanding the Architecture DSL easier.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Changes</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>The command <code>findCycles</code> now filters away CONTAINS relations. In most cases, those relations are not relevant for the search for cycles.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>So an analysis file can be simplified:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">  <span class="keyword">def</span> packageCycleGraph = findCycles(packageGraph
                .filter(dependencyTypeEdgeOutFilter(CONTAINS)), <span class="string"><span class="delimiter">&quot;</span><span class="content">Package</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>can now be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">  <span class="keyword">def</span> packageCycleGraph = findCycles(packageGraph, <span class="string"><span class="delimiter">&quot;</span><span class="content">Package</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>If, for some reason, they really should be part of the search, there is a new optional boolean parameter to not filter away these dependencies:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">  <span class="keyword">def</span> packageCycleGraph = findCycles(packageGraph
                .filter(dependencyTypeEdgeOutFilter(CONTAINS)), <span class="string"><span class="delimiter">&quot;</span><span class="content">Package</span><span class="delimiter">&quot;</span></span>, <span class="predefined-constant">true</span>)</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/qaware/QAvalidator/issues/28">#28</a>: Generalize <code>ignore</code> to <code>includes</code> / <code>excludes</code>.
A class will only be considered if its name is included and not excluded:</p>
<div class="ulist">
<ul>
<li>
<p>it is included if no <code>includes</code> pattern is given <em>or</em> it is matched by at least one of the <code>includes</code> patterns.</p>
</li>
<li>
<p>it is excluded if <code>excludes</code> patterns are given, <em>and</em> a least one <code>excludes</code> pattern matches the name.</p>
</li>
<li>
<p>This replaces the <code>ignore</code> command (which still works, but is deprecated in favor of <code>includes</code> / <code>excludes</code>).</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://github.com/qaware/QAvalidator/issues/38">#38</a>: QAvalidator also reads class files from <code>.jar</code>, <code>.war</code>, and <code>.ear</code> files, and unpacks nested archives.
Note that it&#8217;s necessary to give an <code>includes</code> pattern both for the archive files (otherwise they will not be opened), and for the class file entries to read.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">inputJava <span class="key">baseDir</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">build/libs/qav-app-1.2.2-SNAPSHOT.jar</span><span class="delimiter">&quot;</span></span>,  <i class="conum" data-value="1"></i><b>(1)</b>
          <span class="key">includes</span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">**/*.class</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">**/qav-*.jar</span><span class="delimiter">&quot;</span></span>]           <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>the archive file is given as input directory</p>
</li>
<li>
<p>the <code>includes</code> patterns allow for all <code>.class</code> files, and for all <code>.jar</code> files file which start with <code>qav-*</code> in any directory within a jar. This also holds for further nested archives.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If the archive is given on the command line as non-option argument, the default behaviour is to use all <code>.class</code> files, and to open all nested archive files. This may not always be the desired behaviour, as it also analyzes all the packaged third-party libraries. It will often be a good idea to filter the jar files which are unpacked.</p>
</div>
<div class="paragraph">
<p>Another option is to define a directory as <code>baseDir</code>, and find one or more archive files in there:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">inputJava <span class="key">baseDir</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">build/libs</span><span class="delimiter">&quot;</span></span>,                                     <i class="conum" data-value="1"></i><b>(1)</b>
          <span class="key">includes</span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">**/de/qaware/qav/**/*.class</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">**/qav-*.jar</span><span class="delimiter">&quot;</span></span>]  <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="paragraph">
<p>The advantage is that if the archive names change, the directory can be the same (1), and the archive files can be found with an <code>includes</code> pattern (2). In this example, the classes in the input are restricted to match only classes under <code>de.qaware.qav.**</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/qaware/QAvalidator/issues/41">#41</a>: Visualization: add labels to the edges.
The edge labels give the the number of base relations (at the middle of an edge),
the number of different base relation sources (at the start of an edge),
and the number of different base relation targets (ad the end of an edge).
This is the new default behaviour; so e.g. this command will add labels to the edges:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">  writeDot(architectureTView, <span class="string"><span class="delimiter">&quot;</span><span class="content">architectureTView</span><span class="delimiter">&quot;</span></span>, architecture(<span class="string"><span class="delimiter">&quot;</span><span class="content">T-View</span><span class="delimiter">&quot;</span></span>))</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the labels are not desired, they can be switched off with a new, optional parameter like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">  writeDot(architectureTView, <span class="string"><span class="delimiter">&quot;</span><span class="content">architectureTView</span><span class="delimiter">&quot;</span></span>, architecture(<span class="string"><span class="delimiter">&quot;</span><span class="content">T-View</span><span class="delimiter">&quot;</span></span>), <span class="predefined-constant">false</span>)</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Deprecations</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>The DSL command <code>ignore</code> is now deprecated; it is replaced by <code>excludes</code>. If no <code>includes</code> is given, it behaves the same as <code>excludes</code>. See above.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_release_1_2_0_02_03_2017"><a class="anchor" href="#_release_1_2_0_02_03_2017"></a>6.9. Release 1.2.0&#8201;&#8212;&#8201;02.03.2017</h3>
<div class="paragraph">
<p>Breaking changes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/qaware/QAvalidator/issues/30">#30</a>, <a href="https://github.com/qaware/QAvalidator/issues/32">#32</a>: Reworked tagging of nodes in architecture views.</p>
<div class="ulist">
<ul>
<li>
<p>Retired the <code>reportLeftOvers</code> feature, and retired the convention to have a "Rest" component.
The command <code>createArchitectureView</code> reports unmapped classes.</p>
</li>
<li>
<p>Fixed tagging of architecture components.
The command <code>createArchitectureView</code> now tags all class nodes in the given graph and all of the architecture component nodes which belong to those given class with the given tag. This makes it easier to deal with the resulting graph, especially when the architecture view is created on only a subset of the full graph (e.g. only on the input scope).&#8201;&#8212;&#8201;However, this implies changes to the way we detect unimplemented components.</p>
</li>
<li>
<p>Added new command to the analysis DSL: <code>checkDependencyRules</code> checks if every dependency in the given architecture view is covered by a rule in the architecture definition. This rule has been checked by the command <code>checkArchitectureRules</code>&#8201;&#8212;&#8201;however, if the architecture view is built on only a subset of the input graph, there will be unmapped components which would (wrongly, depending on the perspective), be reported as unimplemented components. To avoid confusion, the rules may now be checked separately.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Changes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/qaware/QAvalidator/issues/31">#31</a>: the Sonar plugin reports each cycle separately, so that the QAcontract plugin can show the number of cycles.</p>
</li>
<li>
<p><a href="https://github.com/qaware/QAvalidator/issues/33">#33</a>: Updated the Analysis DSL documentation. Improved documentation on Maven multi-module builds.</p>
</li>
<li>
<p><a href="https://github.com/qaware/QAvalidator/issues/34">#34</a>: Improved error messages.</p>
</li>
<li>
<p><a href="https://github.com/qaware/QAvalidator/issues/37">#37</a>: The default locations for the analysis filename now includes three places which are checked in this order:
<code>qa/analysis.groovy</code> (as it used to be), <code>src/qa/analysis.groovy</code> (new), and <code>classpath:/default_analysis.groovy</code> (as it used to be). If an analysis file name is defined in Gradle, Maven, or on the command line, that file must exist, and QAvalidator will not try its fallbacks. If no filename is specified, then QAvalidator will try the defaults.</p>
</li>
<li>
<p><a href="https://github.com/qaware/QAvalidator/issues/39">#39</a>: The command <code>createPackageArchitectureView</code> now accepts an optional argument which defines the maximum depth of the package hierarchy.
If this new argument is not given, it defaults to 0 which means "unlimited" and is the previous behaviour.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Fixed Bugs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/qaware/QAvalidator/issues/36">#36</a>: Fixed: <code>JavaScopeReader</code> did not find references to attributes in other classes.</p>
</li>
<li>
<p>Fixed a bug: dependency on implementation is now recognized correctly.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Deprecations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The command <code>reportLeftOvers</code> is deprecated. See above.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_release_1_1_1_06_02_2017"><a class="anchor" href="#_release_1_1_1_06_02_2017"></a>6.10. Release 1.1.1&#8201;&#8212;&#8201;06.02.2017</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/qaware/QAvalidator/issues/23">#23</a>: The release process now deploys the fat executable JARs to Nexus.</p>
</li>
<li>
<p><a href="https://github.com/qaware/QAvalidator/issues/24">#24</a>: Added documentation.</p>
</li>
<li>
<p><a href="https://github.com/qaware/QAvalidator/issues/24">#24</a>: Simplified the default analysis. It now only analyses the input scope, checks for package cycles, and produces some output; it uses only <code>inputClassesGraph</code>, no longer <code>allClassesGraph</code>.</p>
</li>
<li>
<p><a href="https://github.com/qaware/QAvalidator/issues/24">#24</a>: Simplified the analysis DSL. The third parameter to command <code>createArchitectureView</code> is now optional.</p>
</li>
<li>
<p><a href="https://github.com/qaware/QAvalidator/issues/26">#26</a>: Fixed bug in analysis engine: finds relations to annotations on attribute level, ignores primitive types (and arrays of those)</p>
</li>
<li>
<p><a href="https://github.com/qaware/QAvalidator/issues/27">#27</a>: Fixed tagging of architecture components.</p>
</li>
<li>
<p><a href="https://github.com/qaware/QAvalidator/issues/29">#29</a>: Documentation: removed duplicated generation of DSL command docs.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Deprecations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Command <code>printNodes</code>: only pass two arguments; do not pass the list of nodes.
So far, the old version is still there but writes a warning message.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_release_1_1_0_04_02_2017"><a class="anchor" href="#_release_1_1_0_04_02_2017"></a>6.11. Release 1.1.0&#8201;&#8212;&#8201;04.02.2017</h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/qaware/QAvalidator/issues/16">#16</a>: Improved Maven configuration.</p>
</li>
<li>
<p><a href="https://github.com/qaware/QAvalidator/issues/14">#14</a>: NEW: Gradle Plugin</p>
</li>
<li>
<p><a href="https://github.com/qaware/QAvalidator/issues/18">#18</a>: Now the component name "Rest" which is used by convention to collect all left-over classes is no longer hard-coded. NOTE: This requires to filter away that node before calling <code>checkArchitectureRules</code>.<br>
Do something like:<br>
<code>checkArchitectureRules(architectureTView.filter(nodeNameOutFilter("Rest")), architecture("T-View"))</code></p>
</li>
<li>
<p><a href="https://github.com/qaware/QAvalidator/issues/21">#21</a>:
Minor change to the code mapping (see <a href="#qav-architecture-dsl-reference">Architecture Model DSL Reference</a>): uses <code>AntPathMatcher</code> implementation. This should not break common architecture definitions.</p>
</li>
<li>
<p><a href="https://github.com/qaware/QAvalidator/issues/22">#22</a>: Fixed a bug which prevented QAvalidator to see dependencies to type parameters in generic types.</p>
</li>
<li>
<p><a href="https://github.com/qaware/QAvalidator/issues/22">#22</a>: Improved cycle detection. Now unrelated cycles are identified separately. Base relations are logged.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_release_1_0_0_21_12_2016"><a class="anchor" href="#_release_1_0_0_21_12_2016"></a>6.12. Release 1.0.0&#8201;&#8212;&#8201;21.12.2016</h3>
<div class="ulist">
<ul>
<li>
<p>First official QAvalidator release.</p>
</li>
<li>
<p>NEW: a plugin for SonarQube.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_release_0_9_1_12_12_2016"><a class="anchor" href="#_release_0_9_1_12_12_2016"></a>6.13. Release 0.9.1&#8201;&#8212;&#8201;12.12.2016</h3>
<div class="ulist">
<ul>
<li>
<p>Change default for <code>allClassesGraph</code>: only filters out <code>java.lang.*</code> (used to filter <code>java.util.*</code>, <code>java.io.*</code>, and <code>org.slf4j.*</code>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_release_0_9_12_12_2016"><a class="anchor" href="#_release_0_9_12_12_2016"></a>6.14. Release 0.9&#8201;&#8212;&#8201;12.12.2016</h3>
<div class="ulist">
<ul>
<li>
<p>Analysis Engine:</p>
<div class="ulist">
<ul>
<li>
<p>reads Java <code>.class</code> files</p>
</li>
<li>
<p>reads Maven <code>pom.xml</code> files</p>
</li>
</ul>
</div>
</li>
<li>
<p>Output:</p>
<div class="ulist">
<ul>
<li>
<p>produces GraphViz <code>.dot</code> files</p>
</li>
<li>
<p>produces <code>.graphml</code> files for use with yEd</p>
</li>
<li>
<p>writes a log file for SonarQube</p>
</li>
</ul>
</div>
</li>
<li>
<p>UI:</p>
<div class="ulist">
<ul>
<li>
<p>allows to navigate the graph</p>
</li>
<li>
<p>uses Lucene queries to find nodes based on their properties</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="roadmap"><a class="anchor" href="#roadmap"></a>7. QAvalidator Backlog and Roadmap</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter lists features and improvements which are comping up but not yet planned exactly, as well as ideas for features which are not yet concrete enough.</p>
</div>
<div class="sect2">
<h3 id="_features"><a class="anchor" href="#_features"></a>7.1. Features</h3>
<div class="ulist">
<ul>
<li>
<p>Combine static and dynamic analysis:</p>
<div class="ulist">
<ul>
<li>
<p>read traces and include them in the analysis.</p>
</li>
</ul>
</div>
</li>
<li>
<p>create jQAssistant constraints ("concepts") from an architecture, and let jQAssistant do the rest of the work.</p>
<div class="ulist">
<ul>
<li>
<p>This could nicely integrate with projects that do have a jQAssistant configuration, and want to add QAvalidator&#8217;s architecture description.</p>
</li>
</ul>
</div>
</li>
<li>
<p>What-If analysis:</p>
<div class="ulist">
<ul>
<li>
<p>i.e. virtual refactorings and the analysis of the effects.</p>
</li>
<li>
<p>see also the batch-renaming tool at QAware. That input could be used here.</p>
</li>
</ul>
</div>
</li>
<li>
<p>More input scopes:</p>
<div class="ulist">
<ul>
<li>
<p>Analyse JavaScript source code.</p>
</li>
<li>
<p>Find dependencies between TypeScript code and Java code and/or REST endpoints, or regarding the message types (DTOs).</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_code"><a class="anchor" href="#_code"></a>7.2. Code</h3>
<div class="ulist">
<ul>
<li>
<p>More Java, less Groovy for better static analysis and better refactoring. Only DSL parts in Groovy, rest in Java.</p>
</li>
<li>
<p>Speed up input scope reading: use a Thread pool and Executor Service to parallelize analysis and I/O.</p>
<div class="ulist">
<ul>
<li>
<p>watch out: the graph implementation is not thread safe.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_storage"><a class="anchor" href="#_storage"></a>7.3. Storage</h3>
<div class="ulist">
<ul>
<li>
<p>use SOLR for storing the nodes.</p>
<div class="ulist">
<ul>
<li>
<p>read Graph into SOLR</p>
</li>
<li>
<p>also read the Java sources and attach them to the nodes.</p>
</li>
</ul>
</div>
</li>
<li>
<p>or: use Neo4j to store the graph.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="related-work"><a class="anchor" href="#related-work"></a>8. Other Tools</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are many other tools which claim to help on static analysis and architecture validation.
Some of them may be worth looking at, while QAvalidator may beat others&#8201;&#8212;&#8201;at least for the use case it&#8217;s intended for.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Structure101</dt>
<dd>
<p>Better for interactive analysis. See <a href="#s101">[s101]</a>.</p>
</dd>
<dt class="hdlist1">Sonargraph</dt>
<dd>
<p>See <a href="#Sonargraph">[Sonargraph]</a>:
They say about themselves: <em>"Sonargraph-Explorer is a simple but powerful static analysis tool with a focus on metrics
and dependency visualization."</em></p>
</dd>
<dt class="hdlist1">SonarQube</dt>
<dd>
<p>SonarQube <a href="#SonarQube">[SonarQube]</a> offers a view called the "component design".
It offers a matrix view on packages and their dependencies.
It&#8217;s a little hard to read and work with; as long as the system is fairly clean (not too tangled), it&#8217;s ok to find a cycle.
SonarCube does not allow to define something like an intended architecture.</p>
</dd>
<dt class="hdlist1">jQAssistant</dt>
<dd>
<p>See <a href="#jQAssistant">[jQAssistant]</a>, jQAssistant is the new kid on the block for static code analysis.
jQAssistant has a similar approach as QAvalidator: It reads the byte code to find dependencies; it also considers the
system to form a graph with classes as the nodes, and dependencies as the edges.
jQAssistant offers nice analysis options and an interactive way to explore the classes graph.
It knows a concept to define rules which declare <em>unwanted</em> dependencies.
It does not allow to model the <em>intended</em> architecture.</p>
</dd>
<dt class="hdlist1">JDepend</dt>
<dd>
<p>Project seems to be dead. See <a href="#JDepend">[JDepend]</a>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>For a discussion of more tools, see <a href="#AP11">[AP11]</a>, chapter 6.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="bibliography"><a class="anchor" href="#bibliography"></a>Bibliography and Links</h2>
<div class="sectionbody">
<div class="ulist bibliography">
<ul class="bibliography">
<li>
<p><a id="AP11"></a>[AP11] Josef Adersberger, Michael Philippsen, <em>ReflexML: UML-based Architecture-to-code Traceability and Consistency Checking</em>, ECSA 2011</p>
</li>
<li>
<p><a id="GraphViz"></a>[GraphViz] GraphViz, <a href="http://www.graphviz.org/" class="bare">http://www.graphviz.org/</a> <em>(last checked: 04.02.2016)</em></p>
</li>
<li>
<p><a id="JDepend"></a>[JDepend] JDepend, <a href="http://clarkware.com/software/JDepend.html" class="bare">http://clarkware.com/software/JDepend.html</a> <em>(last checked: 30.08.2016)</em></p>
</li>
<li>
<p><a id="jQAssistant"></a>[jQAssistant] jQAssistant, <a href="https://jqassistant.org/" class="bare">https://jqassistant.org/</a>, <em>(last checked: 29.08.2016)</em></p>
</li>
<li>
<p><a id="s101"></a>[s101] Structure101, <a href="http://structure101.com/" class="bare">http://structure101.com/</a>, <em>(last checked: 30.08.2016)</em></p>
</li>
<li>
<p><a id="Sonargraph"></a>[Sonargraph] Sonargraph, <a href="https://www.hello2morrow.com/products/sonargraph" class="bare">https://www.hello2morrow.com/products/sonargraph</a> <em>(last checked: 17.02.2016)</em></p>
</li>
<li>
<p><a id="SonarQube"></a>[SonarQube] SonarQube, <a href="http://www.sonarqube.org/" class="bare">http://www.sonarqube.org/</a>, <em>(last checked: 29.08.2016)</em></p>
</li>
<li>
<p><a id="yEd"></a>[yEd] yEd, <a href="http://www.yworks.com/" class="bare">http://www.yworks.com/</a>, <em>(last checked: 12.12.2016)</em></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 1.2.9<br>
Last updated 2017-11-05 11:40:16 +01:00
</div>
</div>
</body>
</html>